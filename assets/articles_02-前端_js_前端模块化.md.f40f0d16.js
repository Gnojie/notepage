import{_ as a,o as l,c as o,a as s,b as n}from"./app.853851d6.js";const m=JSON.parse(`{"title":"","description":"","frontmatter":{},"headers":[{"level":2,"title":"æ¨¡å—åŒ–èƒŒæ™¯","slug":"æ¨¡å—åŒ–èƒŒæ™¯","link":"#æ¨¡å—åŒ–èƒŒæ™¯","children":[]},{"level":2,"title":"æ¨¡å—åŒ–æ–¹æ¡ˆç¯å¢ƒæ”¯æŒ","slug":"æ¨¡å—åŒ–æ–¹æ¡ˆç¯å¢ƒæ”¯æŒ","link":"#æ¨¡å—åŒ–æ–¹æ¡ˆç¯å¢ƒæ”¯æŒ","children":[]},{"level":2,"title":"CommonJs","slug":"commonjs","link":"#commonjs","children":[{"level":3,"title":"ä»0å®ç°ç®€æ˜“Commonjs","slug":"ä»0å®ç°ç®€æ˜“commonjs","link":"#ä»0å®ç°ç®€æ˜“commonjs","children":[]},{"level":3,"title":"Commonjsè·å–åŠ¨æ€å€¼","slug":"commonjsè·å–åŠ¨æ€å€¼","link":"#commonjsè·å–åŠ¨æ€å€¼","children":[]},{"level":3,"title":"å…³äºCommonjsçš„requireæ˜¯åŠ¨æ€å¼•ç”¨","slug":"å…³äºcommonjsçš„requireæ˜¯åŠ¨æ€å¼•ç”¨","link":"#å…³äºcommonjsçš„requireæ˜¯åŠ¨æ€å¼•ç”¨","children":[]},{"level":3,"title":"ä¸ç”¨exports.xx='' è€Œæ˜¯exports={xx:''} æ¥å­˜å‚¨å˜é‡ä¼šæ€æ ·","slug":"ä¸ç”¨exports-xx-è€Œæ˜¯exports-xx-æ¥å­˜å‚¨å˜é‡ä¼šæ€æ ·","link":"#ä¸ç”¨exports-xx-è€Œæ˜¯exports-xx-æ¥å­˜å‚¨å˜é‡ä¼šæ€æ ·","children":[]}]},{"level":2,"title":"ES Module","slug":"es-module","link":"#es-module","children":[{"level":3,"title":"nodeç¯å¢ƒ","slug":"nodeç¯å¢ƒ","link":"#nodeç¯å¢ƒ","children":[]},{"level":3,"title":"æµè§ˆå™¨ç¯å¢ƒ","slug":"æµè§ˆå™¨ç¯å¢ƒ","link":"#æµè§ˆå™¨ç¯å¢ƒ","children":[]},{"level":3,"title":"ESMè¯†åˆ«çš„èµ„æºè·¯å¾„","slug":"esmè¯†åˆ«çš„èµ„æºè·¯å¾„","link":"#esmè¯†åˆ«çš„èµ„æºè·¯å¾„","children":[]},{"level":3,"title":"æ¥æ”¶çš„æ˜¯åŠ¨æ€çš„å€¼","slug":"æ¥æ”¶çš„æ˜¯åŠ¨æ€çš„å€¼","link":"#æ¥æ”¶çš„æ˜¯åŠ¨æ€çš„å€¼","children":[]},{"level":3,"title":"ESMè‡ªåŠ¨ä¸¥æ ¼æ¨¡å¼","slug":"esmè‡ªåŠ¨ä¸¥æ ¼æ¨¡å¼","link":"#esmè‡ªåŠ¨ä¸¥æ ¼æ¨¡å¼","children":[]}]},{"level":2,"title":"ç¼–è¯‘æ—¶ã€è¿è¡Œæ—¶ã€é™æ€åŒ–","slug":"ç¼–è¯‘æ—¶ã€è¿è¡Œæ—¶ã€é™æ€åŒ–","link":"#ç¼–è¯‘æ—¶ã€è¿è¡Œæ—¶ã€é™æ€åŒ–","children":[{"level":3,"title":"ESMçš„ç¼–è¯‘æ—¶","slug":"esmçš„ç¼–è¯‘æ—¶","link":"#esmçš„ç¼–è¯‘æ—¶","children":[]},{"level":3,"title":"CJSçš„è¿è¡Œæ—¶","slug":"cjsçš„è¿è¡Œæ—¶","link":"#cjsçš„è¿è¡Œæ—¶","children":[]},{"level":3,"title":"nodejsä¸­å…±ç”¨ä¸¤ç§æ¨¡å—åŒ–æ–¹å¼ä¼šæ€æ ·","slug":"nodejsä¸­å…±ç”¨ä¸¤ç§æ¨¡å—åŒ–æ–¹å¼ä¼šæ€æ ·","link":"#nodejsä¸­å…±ç”¨ä¸¤ç§æ¨¡å—åŒ–æ–¹å¼ä¼šæ€æ ·","children":[]}]},{"level":2,"title":"ESMå¯ä»¥è¿è¡Œæ—¶çš„import()","slug":"esmå¯ä»¥è¿è¡Œæ—¶çš„import","link":"#esmå¯ä»¥è¿è¡Œæ—¶çš„import","children":[]},{"level":2,"title":"ES6ä¸CommonJSçš„åŒºåˆ«","slug":"es6ä¸commonjsçš„åŒºåˆ«","link":"#es6ä¸commonjsçš„åŒºåˆ«","children":[]},{"level":2,"title":"esmçš„é™åˆ¶ä¸è§£å†³æ–¹æ¡ˆ","slug":"esmçš„é™åˆ¶ä¸è§£å†³æ–¹æ¡ˆ","link":"#esmçš„é™åˆ¶ä¸è§£å†³æ–¹æ¡ˆ","children":[{"level":3,"title":"ä»£ç éœ€è¦åŸºäºeså¼€å‘","slug":"ä»£ç éœ€è¦åŸºäºeså¼€å‘","link":"#ä»£ç éœ€è¦åŸºäºeså¼€å‘","children":[]},{"level":3,"title":"ç¬¬ä¸‰æ–¹èµ„æºçš„å¯¼å‡ºè¦æ”¯æŒESM","slug":"ç¬¬ä¸‰æ–¹èµ„æºçš„å¯¼å‡ºè¦æ”¯æŒesm","link":"#ç¬¬ä¸‰æ–¹èµ„æºçš„å¯¼å‡ºè¦æ”¯æŒesm","children":[]},{"level":3,"title":"ä¸æ”¯æŒesmçš„æµè§ˆå™¨","slug":"ä¸æ”¯æŒesmçš„æµè§ˆå™¨","link":"#ä¸æ”¯æŒesmçš„æµè§ˆå™¨","children":[]}]},{"level":2,"title":"æ€è€ƒ","slug":"æ€è€ƒ","link":"#æ€è€ƒ","children":[{"level":3,"title":"1. webpackå·¥ç¨‹ä¸‹æ€ä¹ˆåŒæ—¶æ”¯æŒCommonJså’ŒESMè§„èŒƒ","slug":"_1-webpackå·¥ç¨‹ä¸‹æ€ä¹ˆåŒæ—¶æ”¯æŒcommonjså’Œesmè§„èŒƒ","link":"#_1-webpackå·¥ç¨‹ä¸‹æ€ä¹ˆåŒæ—¶æ”¯æŒcommonjså’Œesmè§„èŒƒ","children":[]},{"level":3,"title":"2. babelå¦‚ä½•æŠŠesmç¼–è¯‘æˆcommonjsï¼Œåœ¨nodeç¯å¢ƒä¸­è¿è¡Œ","slug":"_2-babelå¦‚ä½•æŠŠesmç¼–è¯‘æˆcommonjs-åœ¨nodeç¯å¢ƒä¸­è¿è¡Œ","link":"#_2-babelå¦‚ä½•æŠŠesmç¼–è¯‘æˆcommonjs-åœ¨nodeç¯å¢ƒä¸­è¿è¡Œ","children":[]},{"level":3,"title":"3. webpackã€rollupæ˜¯æ€ä¹ˆæ”¯æŒtree shaking","slug":"_3-webpackã€rollupæ˜¯æ€ä¹ˆæ”¯æŒtree-shaking","link":"#_3-webpackã€rollupæ˜¯æ€ä¹ˆæ”¯æŒtree-shaking","children":[]}]},{"level":2,"title":"å‚è€ƒèµ„æ–™","slug":"å‚è€ƒèµ„æ–™","link":"#å‚è€ƒèµ„æ–™","children":[]}],"relativePath":"articles/02-å‰ç«¯/js/å‰ç«¯æ¨¡å—åŒ–.md"}`),p={name:"articles/02-å‰ç«¯/js/å‰ç«¯æ¨¡å—åŒ–.md"},e=s("iframe",{src:"//player.bilibili.com/player.html?aid=208982494&bvid=BV1jh411t7eX&cid=435896955&page=1",width:"100%",height:"300px",scrolling:"no",border:"0",frameborder:"no",framespacing:"0",allowfullscreen:"true"}," ",-1),t=n(`<p>å®Œæ•´è§†é¢‘ç³»åˆ—åŠå€æ•°è¯·ç§»æ­¥ <a href="https://space.bilibili.com/100023688" target="_blank" rel="noreferrer">bilibili</a></p><h2 id="æ¨¡å—åŒ–èƒŒæ™¯" tabindex="-1">æ¨¡å—åŒ–èƒŒæ™¯ <a class="header-anchor" href="#æ¨¡å—åŒ–èƒŒæ™¯" aria-hidden="true">#</a></h2><blockquote><p>åœ¨ç°ä»£å‰ç«¯å·¥ç¨‹é‡Œé¢ï¼Œæˆ‘ä»¬ç¦»ä¸å¼€æ‰“åŒ…å·¥å…·ï¼Œæ¯”å¦‚è¯´ <a href="https://webpack.docschina.org/concepts/" target="_blank" rel="noreferrer">webpack</a>ã€<a href="https://www.rollupjs.com/" target="_blank" rel="noreferrer">rollup</a>ã€<a href="https://cn.vitejs.dev/guide/" target="_blank" rel="noreferrer">vite</a></p></blockquote><p>é‚£ä¹ˆæˆ‘ä»¬ä¸ºä»€ä¹ˆè¦ç”¨åˆ°æ‰“åŒ…å·¥å…·å‘¢? åŸå› ä¹‹ä¸€æ˜¯ï¼šåœ¨æµè§ˆå™¨æ”¯æŒ ES æ¨¡å—ä¹‹å‰ï¼Œå‰ç«¯æ²¡æœ‰åŸç”Ÿæ”¯æŒä»¥æ¨¡å—åŒ–çš„æ–¹å¼å¼€å‘ jsã€‚æ‰“åŒ…å·¥å…·çš„å‡ºç°ä¹Ÿæ˜¯ä¸ºäº†å¸®åŠ©å¼€å‘è®©æµè§ˆå™¨æ”¯æŒçš„æ¨¡å—åŒ–æ–¹æ¡ˆã€‚</p><p>é‚£ä¸ä½¿ç”¨æ¨¡å—åŒ–å¼€å‘çš„ä½“éªŒä¼šæ˜¯ä»€ä¹ˆæ ·å­å‘¢ï¼Ÿ</p><ul><li>å®¹æ˜“é€ æˆå˜é‡æ±¡æŸ“(æ— æ„å£°æ˜ç›¸åŒå˜é‡é€ æˆä½¿ç”¨æ—¶ä¸æ˜¯é¢„æœŸå˜é‡)</li><li>jsæ–‡ä»¶ä¹‹é—´æœ‰ä¾èµ–å…³ç³»æ—¶ï¼Œå› ä¸ºä¸èƒ½åœ¨jsä¸­å¼•jsï¼Œåªèƒ½ç»Ÿä¸€å†™åˆ°scriptå¼•å…¥ï¼Œéœ€è¦æ³¨æ„é¡ºåºé—®é¢˜ã€‚è€Œä¸”è¢«ä¾èµ–çš„jsä¸€èˆ¬ä¸å¸Œæœ›è¢«å…¶ä»–jsè°ƒç”¨ï¼Œscriptåªèƒ½å…¨å±€å¼•å…¥ï¼Œæ‰€æœ‰jséƒ½èƒ½è°ƒç”¨ä¸éœ€è¦å¼•ç”¨</li><li>å¼€å‘æ— æ³•åˆ†å—ç¼–å†™ï¼Œå°†é¡¹ç›®åˆ†æˆæ›´å°çš„ç‹¬ç«‹éƒ¨åˆ†ï¼Œæ˜¯è·Ÿä¼˜é›…çš„å¼€å‘æ¨¡å¼ï¼Œæ›´å¥½ç»´æŠ¤ä»£ç å’Œæ›´å¥½çš„å¤ç”¨ã€‚</li></ul><p>è¿™ä¹Ÿæ˜¯<code>â€œæ‰“åŒ…â€</code>è¿™ä¸ªæ¦‚å¿µå‡ºç°çš„åŸå› ï¼šä½¿ç”¨æ‰“åŒ…å·¥å…·æŠ“å–æ”¶é›†ä¾èµ–èµ„æºã€å¤„ç†æˆscriptæˆ–æ˜¯å…¶ä»–å½¢å¼é“¾æ¥èµ„æºæ–‡ä»¶åˆ°å¼•ç”¨æ–¹æ–‡ä»¶ä¸­ï¼Œå®ç°æ¨¡å—åŒ–ã€‚</p><blockquote><p>æ¥ä¸‹æ¥å°†ä¸»è¦è®²è§£ <code>Commonjsã€ES Module</code> æ¨¡å—åŒ–å¹¶ä¸”ä¸ä¼šè®²åŸºç¡€ä½¿ç”¨ï¼Œå…¶ä»–å¦‚ <code>AMDã€UMD</code> å¯èƒ½æåŠä½†ä¸ä¼šç»†è®²ï¼Œæ„Ÿå…´è¶£è¯·è‡ªè¡Œæœç´¢ğŸ”å­¦ä¹ </p></blockquote><h2 id="æ¨¡å—åŒ–æ–¹æ¡ˆç¯å¢ƒæ”¯æŒ" tabindex="-1">æ¨¡å—åŒ–æ–¹æ¡ˆç¯å¢ƒæ”¯æŒ <a class="header-anchor" href="#æ¨¡å—åŒ–æ–¹æ¡ˆç¯å¢ƒæ”¯æŒ" aria-hidden="true">#</a></h2><p>å¼€å‘ç¯å¢ƒï¼ˆ<code>nodejs</code>ï¼‰</p><ul><li>æ”¯æŒ<code>Commonjs</code></li><li>ES6åé€šè¿‡<code>.mjs</code>æ”¯æŒ <code>ES Module</code></li></ul><p>æµè§ˆå™¨ç¯å¢ƒ</p><ul><li>ä¸æ”¯æŒ <code>Commonjs</code></li><li>ES6åæ”¯æŒ <code>ES Module</code></li></ul><h2 id="commonjs" tabindex="-1">CommonJs <a class="header-anchor" href="#commonjs" aria-hidden="true">#</a></h2><blockquote><p>Commonjsæ˜¯ä¸€ç§æ¨¡å—åŒ–è§„èŒƒ(æ€æƒ³)</p></blockquote><p><code>Commonjs</code> æ˜¯ä¸€ç§è§„èŒƒå¹¶ä¸æ˜¯ä¸€ç§å…·ä½“çš„ä»£ç ï¼Œç±»ä¼¼ <code>promise A+</code> è§„èŒƒï¼Œåªè¦ç¬¦åˆè§„èŒƒé‡Œæ‰€æœ‰çš„æ¡ä»¶ï¼Œé‚£å®ƒå°±æ˜¯ <code>Commonjs</code>ã€‚</p><p>è€Œnodejså°±æ˜¯å€Ÿé‰´è¿™ç§æ€æƒ³å®ç°è‡ªå·±çš„æ¨¡å—åŒ–çš„ï¼Œæ‰€ä»¥ä¹Ÿä¸èƒ½å®Œå…¨è¯´nodejså°±æ˜¯ <code>Commonjs</code></p><blockquote><p>AMDæ¨¡å—åŒ–åŒæ ·è„±èƒäºCommonjsè§„èŒƒï¼Œæµè§ˆå™¨æ”¯æŒçš„Commonjsä¸€èˆ¬æ˜¯ä½¿ç”¨require.jsçš„åº“ï¼Œæ³¨æ„è¿™ä¸ªåº“å’Œnodejsçš„requireä¸æ˜¯ä¸€ä¸ªä¸œè¥¿ï¼Œè¿™ä¸ªåº“çš„Commonjsæ˜¯AMDå®ç°çš„ã€‚</p></blockquote><p>ä¸ºäº†è§£å†³å˜é‡æ±¡æŸ“çš„é—®é¢˜ï¼ŒCommonjsè§„å®šæ¯ä¸€ä¸ªjséƒ½æ˜¯ç‹¬ç«‹çš„æ¨¡å—ï¼Œå³ä¾èµ–çš„æ–‡ä»¶æ²¡æœ‰æŠ›å‡ºçš„å˜é‡ï¼Œæ˜¯æ— æ³•è·åˆ°çš„ã€‚å¯ä»¥çœ‹ä½œæ¯ä¸ªæ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ªé—­åŒ…ã€‚</p><blockquote><p>å¦å¤–ï¼Œ<code>webpack</code>ä½œä¸ºä»¥nodejsä¸ºåº•å±‚è¯­è¨€(å¼ºè°ƒè¿™ä¸ªæ˜¯å› ä¸º<a href="https://esbuild.github.io/" target="_blank" rel="noreferrer">ESbuild</a>ä»¥<a href="https://www.topgoer.com/" target="_blank" rel="noreferrer">GO</a>ä¸ºåº•å±‚è¯­è¨€)çš„æ‰“åŒ…å·¥å…·ï¼Œæ˜¯ä¾é nodejsçš„Commonjsåšä¾èµ–æ”¶é›†è¿›è¡Œæ•´åˆåç”¨æ–¹æ³•æ’å…¥scriptæ¥ååŠ©æ‰“åŒ…çš„ã€‚æ‰€ä»¥webpackå·¥ç¨‹ä¸‹ï¼Œç¼–å†™Commonjsä¸éœ€è¦é¢å¤–æ”¯æŒï¼Œå¯ä»¥ç›´æ¥ç¼–è¯‘è¯†åˆ«ã€‚-- TODO: è¿™é‡Œè¡¥ä¸€ä¸ªæ–‡ç« è·³è½¬å„ç§æ‰“åŒ…å·¥å…·çš„æ¨¡å—åŒ–åŸç†</p></blockquote><h3 id="ä»0å®ç°ç®€æ˜“commonjs" tabindex="-1">ä»0å®ç°ç®€æ˜“Commonjs <a class="header-anchor" href="#ä»0å®ç°ç®€æ˜“commonjs" aria-hidden="true">#</a></h3><h4 id="_0-å‰æœŸå‡†å¤‡" tabindex="-1">0. å‰æœŸå‡†å¤‡ <a class="header-anchor" href="#_0-å‰æœŸå‡†å¤‡" aria-hidden="true">#</a></h4><p>å¼€å§‹å‰å…ˆè½¬å˜ä»¥å‰çš„å›ºæœ‰å°è±¡ï¼Œ<code>â€œå¼•å…¥â€</code>å’Œ<code>â€œæŠ›å‡ºâ€</code></p><p>åœ¨Commonjs</p><ul><li><code>å¼•å…¥</code>çš„æœ¬è´¨æ˜¯å­˜å‚¨/ç¼“å­˜</li><li><code>æŠ›å‡º</code>çš„æœ¬è´¨æ˜¯è¯»å–ç¼“å­˜</li></ul><p>å®ç°æ¨¡å—åŒ–çš„æœ¬è´¨å°±æ˜¯ï¼ŒæŠŠæ¯ä¸ªæ–‡ä»¶å­˜å‚¨åˆ°<code>Modules</code>çš„å¤§å¯¹è±¡ä¸­ï¼Œæ¯ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªå­å¯¹è±¡<code>module</code>ï¼Œä¸”æ¯ä¸ªæ–‡ä»¶<code>moduleå¯¹è±¡</code>å†…æœ‰å„ç§ä¿¡æ¯</p><p>æ‰“å°moduleå’ŒModule</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> Module </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">[</span><span style="color:#89DDFF;">module</span><span style="color:#F07178;">] = {</span></span>
<span class="line"><span style="color:#F07178;">    id</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">exports</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">loaded</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">module</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">...</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">...</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  ...</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span></code></pre></div><p>æŠ›å‡ºçš„å†…å®¹å°±æ˜¯å¾€å¯¹è±¡é‡Œçš„<code>exports</code>å­˜å‚¨æ·±æ‹·è´çš„å€¼ï¼Œå¼•å…¥å°±æ˜¯è·å–æ•´ä¸ª<code>exports</code>ï¼ˆä¸€èˆ¬è§£æ„èµ‹å€¼å–å‡ºæ¥ä½¿ç”¨ï¼‰</p><p>ç”±æ­¤å¯ä»¥çœ‹å‡ºä¸€ä¸ª <code>Commonjs</code> çš„ç‰¹æ€§ï¼šå¼•å…¥(ä¹Ÿå°±æ˜¯è·å–ç¼“å­˜)çš„å€¼å–å†³äºå½“æ—¶å­˜å‚¨æ—¶çš„å€¼ï¼Œä¹Ÿå°±ä¸æ˜¯åŠ¨æ€å¯å˜çš„äº†</p><h4 id="_1-è®©jsæ–‡ä»¶ç›´æ¥æ”¯æŒmyexportã€myrequireç­‰" tabindex="-1">1. è®©jsæ–‡ä»¶ç›´æ¥æ”¯æŒmyexportã€myrequireç­‰ <a class="header-anchor" href="#_1-è®©jsæ–‡ä»¶ç›´æ¥æ”¯æŒmyexportã€myrequireç­‰" aria-hidden="true">#</a></h4><p>æ”¯æŒCommonjsçš„ç¯å¢ƒ(nodejs)ï¼Œä¼šåœ¨ç¼–è¯‘è¿è¡Œjsæ—¶(è¿è¡Œ <code>node xx.js</code> )åŒ…è£…js</p><p>å³æˆ‘ä»¬å†™çš„jsä¸æ˜¯æœ€ç»ˆæ‰§è¡Œçš„jsï¼Œè€Œæ˜¯ä¼šè¢«åŒ…è£¹èµ·æ¥ï¼Œè¿›è¡Œç»Ÿä¸€å¤„ç†</p><p>å¦‚ <code>node index.js</code> ï¼Œæ‰§è¡Œindex.jsï¼Œnodejså°±ä¼šå…ˆå¯¹index.jsè¿›è¡ŒåŒ…è£…</p><p>æ³¨å…¥è¿›å»<code>exportã€models</code>ç­‰å˜é‡æˆ–å‡½æ•°</p><p>è¿™å°±æ˜¯åœ¨jsé‡Œå…¨å±€æ”¯æŒä½¿ç”¨exportçš„åŸå› </p><p>æ¥ä¸‹æ¥æ‰‹å†™å®ç°ä¸€ä¸ª <code>Commonjs</code>æ¨¡å—åŒ–ï¼Œä¸ä¼šä½¿ç”¨nodejsæ¨¡å—åŒ–ç›¸å…³çš„apiï¼Œä½†æ˜¯è¿˜æ˜¯éœ€è¦ç”¨åˆ°nodejså…¶ä»–çš„apiæ¥å¸®åŠ©æˆ‘ä»¬å®ç°ï¼Œå¦‚è¯»å–æ–‡ä»¶å†…å®¹çš„ <code>fs</code>ï¼Œé‡åˆ°ä¸ä¼šçš„<a href="http://nodejs.cn/api/" target="_blank" rel="noreferrer">nodejs API</a>è¯·è‡ªè¡Œæœç´¢ğŸ”å­¦ä¹ </p><p>ç”±ğŸ‘†åˆ†æï¼Œæˆ‘ä»¬éœ€è¦è¯»å–requireå¼•å…¥çš„èµ„æºæ–‡ä»¶å†…å®¹ï¼Œè¿›è¡ŒåŒ…è£…å¹¶ä¸”æ³¨å…¥æ¨¡å—åŒ–apiæˆ–å…¶ä»–å·¥å…·æ–¹æ³•</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// åŒ…è£…jsæ–‡ä»¶ æ³¨å…¥apiçš„æœŸæœ›æ–¹å¼</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(){</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">wrap</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">fileContent</span><span style="color:#F07178;">)(</span><span style="color:#A6ACCD;">myrequire</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// æŸ¯é‡ŒåŒ–å‡½æ•°æ–¹å¼ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨ä¼ é€’å¼•å…¥çš„èµ„æºæ–‡ä»¶å†…å®¹ï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œä¼ é€’è¦æ³¨å…¥çš„ä¸œè¥¿å¹¶è¿è¡Œ</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>ğŸ‘†åŒ…è£…jsæ–‡ä»¶ æ³¨å…¥apiçš„æœŸæœ›æ–¹å¼</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">wrap</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">fileContent</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// æ‹¼æ¥å‡½æ•°è¿›è¡ŒåŒ…è£… æ³¨æ„è¦åŒ…ä¸€å±‚()æ‰ä¸ä¼šè¢«evalç«‹å³æ‰§è¡Œ,è€Œæ˜¯è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²()å†…çš„å‡½æ•°</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">newfileContent</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">(function (myrequire){</span></span>
<span class="line"><span style="color:#C3E88D;">    </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">fileContent</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#C3E88D;">  })</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">eval</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">newfileContent</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>ğŸ‘† èµ„æºæ–‡ä»¶å†…å®¹æ˜¯ä¸€ä¸ªjsæ–‡ä»¶çš„æ‰€æœ‰å­—ç¬¦ä¸²ï¼Œé‡Œé¢å¯ä»¥ç›´æ¥ä½¿ç”¨æ¨¡å—åŒ–api å…ˆåŒ…è£…å­—ç¬¦ä¸²ï¼Œç„¶åæ‰§è¡Œï¼Œæ³¨æ„æ‰§è¡Œå­—ç¬¦ä¸²çš„ç»“æœè¦è¿”å›ä¸€ä¸ªå‡½æ•°è€Œä¸æ˜¯ç›´æ¥æ‰§è¡Œ(ä¼šæŠ¥é”™myrequire undefined)</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> fs </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">requuire</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">fs</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">myrequire</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">filePath</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">å¼€å§‹å¼•å…¥</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">filePath</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">fileContent</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">fileContent</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">fs</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">readFile</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">filePath</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">utf8</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;font-style:italic;">catch</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">err</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">æ²¡æœ‰æ‰¾åˆ°å¼•ç”¨èµ„æº</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">filePath</span><span style="color:#89DDFF;">}\`</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">fileContent</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">wrap</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">fileContent</span><span style="color:#F07178;">)(</span><span style="color:#A6ACCD;">myrequire</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">myrequire</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./index.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p>è¿™æ ·å°±èƒ½è¿è¡Œå¼•å…¥çš„èµ„æºæ–‡ä»¶äº†ï¼Œä½†æ˜¯è¿˜æ²¡å®ç°æ¨¡å—åŒ–æŠ›å‡ºå’Œæ¥æ”¶çš„åŠ¨ä½œ</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// index.js</span></span>
<span class="line"><span style="color:#82AAFF;">myrequire</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./a.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#82AAFF;">myrequire</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./b.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">lof</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">æ‰§è¡Œindex.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// b.js</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">æ‰§è¡Œb.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// æ²¡æœ‰a.js</span></span>
<span class="line"></span></code></pre></div><p>æ‰“å°å†…å®¹ä¼šå‘ç°æ‰§è¡Œé¡ºåº</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#A6ACCD;">å¼€å§‹å¼•å…¥index</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js</span></span>
<span class="line"><span style="color:#A6ACCD;">æ‰§è¡Œindex</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js</span></span>
<span class="line"><span style="color:#A6ACCD;">å¼€å§‹å¼•å…¥a</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js</span></span>
<span class="line"><span style="color:#A6ACCD;">å¼€å§‹å¼•å…¥b</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js</span></span>
<span class="line"><span style="color:#A6ACCD;">æ²¡æœ‰æ‰¾åˆ°a</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js</span></span>
<span class="line"><span style="color:#A6ACCD;">æ‰§è¡Œb</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js</span></span>
<span class="line"></span></code></pre></div><p>å¯ä»¥çœ‹åˆ°ï¼Œindex.jså¼•å…¥aå’Œbï¼Œæ‰§è¡Œindexå¹¶æ²¡æœ‰ç­‰aå’Œbå¼•å…¥ç»“æŸ</p><p>è€Œè¿è¡Œä¸€æ¬¡åŸç”ŸCommonjså¦‚ä¸‹</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#A6ACCD;">å¼€å§‹å¼•å…¥index</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js</span></span>
<span class="line"><span style="color:#A6ACCD;">å¼€å§‹å¼•å…¥a</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js</span></span>
<span class="line"><span style="color:#A6ACCD;">error æ²¡æœ‰æ‰¾åˆ°a</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js</span></span>
<span class="line"></span></code></pre></div><p>åŸç”Ÿæ˜¯ä¼šç­‰aå’Œbå¼•å…¥ç»“æŸæ‰æ‰§è¡Œindexçš„ï¼Œå¹¶ä¸”é‡åˆ°å¼•å…¥å¼‚å¸¸ä¼šä¸­æ–­è¿è¡Œ</p><blockquote><p><code>Commonjs</code> æ¨¡å—åŒ–æ˜¯åŒæ­¥åŠ è½½çš„</p></blockquote><p>æˆ‘ä»¬è‡ªå·±å†™çš„ <code>Commonjs</code> ä¸æ˜¯åŒæ­¥çš„åŸå› æ˜¯fsè¯»å–æ–‡ä»¶å†…å®¹çš„api <code>fs.readFile()</code> ç”¨äº†å¼‚æ­¥åŠ è½½</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// è¯»å–æ–‡ä»¶å†…å®¹æ˜¯å¼‚æ­¥çš„ï¼Œå¤–é¢è°ƒç”¨myrequireæ˜¯ä¸ä¼šç­‰å†…éƒ¨å¼‚æ­¥ç»“æŸ</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// æ‰€ä»¥è¯»å–æ–‡ä»¶å†…å®¹è¦ç”¨åŒæ­¥</span></span>
<span class="line"><span style="color:#A6ACCD;">fs</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">readFile</span><span style="color:#A6ACCD;">(filePath)</span></span>
<span class="line"><span style="color:#A6ACCD;">fs</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">readFileSync</span><span style="color:#A6ACCD;">(filePath)</span></span>
<span class="line"></span></code></pre></div><p>å¹¶ä¸”å¤„ç†è¯»å–æ–‡ä»¶å†…å®¹å¤±è´¥ï¼Œè¦ä¸­æ–­nodejsè¿è¡Œï¼ŒæŠ›å‡ºé”™è¯¯<code>throw</code> æ”¹é€ åçš„ <code>myrequire()</code></p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">myrequire</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">filePath</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">å¼€å§‹å¼•å…¥</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">filePath</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">fileContent</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">fileContent</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">fs</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">readFileSync</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">filePath</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">utf8</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;font-style:italic;">catch</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">err</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">æ²¡æœ‰æ‰¾åˆ°å¼•ç”¨èµ„æº</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">filePath</span><span style="color:#89DDFF;">}\`</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">fileContent</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">wrap</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">fileContent</span><span style="color:#F07178;">)(</span><span style="color:#A6ACCD;">myrequire</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h4 id="_2-myrequireè¯†åˆ«èµ„æºæ–¹å¼" tabindex="-1">2. myrequireè¯†åˆ«èµ„æºæ–¹å¼ <a class="header-anchor" href="#_2-myrequireè¯†åˆ«èµ„æºæ–¹å¼" aria-hidden="true">#</a></h4><p>è¯†åˆ«èµ„æºè·¯å¾„çš„å‡ ç§æ ¼å¼</p><ul><li>xxx nodeå†…ç½®æ¨¡å—</li><li>/xxx å½“å‰ç›®å½•ç»å¯¹è·¯å¾„</li><li>./ ../ å½“å‰ç›®å½•ç›¸å¯¹è·¯å¾„</li><li>xxx node_modulesä¸‹çš„ç›®å½•</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * æ–‡ä»¶è·¯å¾„å‡ ç§æ ¼å¼</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * xxx nodeå†…ç½®æ¨¡å—</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * /xxx å½“å‰ç›®å½•ç»å¯¹è·¯å¾„</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * ./ ../ å½“å‰ç›®å½•ç›¸å¯¹è·¯å¾„</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * xxx node_modulesä¸‹çš„ç›®å½•</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> enterPublicPath </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">example</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">dealFilePath</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">filePath</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">firstString</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">filePath</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">charAt</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// è·¯å¾„é¦–å­—ç¬¦</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">firstString</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">.</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// å½“å‰ç›®å½•ç›¸å¯¹è·¯å¾„è½¬ä¸ºç»å¯¹è·¯å¾„(æ¨¡æ‹Ÿçš„éƒ½æ˜¯ä»exampleä¸­å¼•å…¥çš„ï¼Œè·Ÿå½“å‰coreæ–‡ä»¶å¤¹æ˜¯åŒçº§æ‰€ä»¥ç›¸å¯¹è·¯å¾„ä¹Ÿæ˜¯)</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// console.log(&#39;å½“å‰æ–‡ä»¶coreçš„ç»å¯¹è·¯å¾„&#39;,__dirname);</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">path</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">__dirname</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">../</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">enterPublicPath</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">filePath</span><span style="color:#89DDFF;">}\`</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">firstString</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// å½“å‰ç›®å½•ç»å¯¹è·¯å¾„</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">nodeå†…ç½®æ¨¡å—</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">includes</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">filePath</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// nodeå†…ç½®æ¨¡å—</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// node_moduleæ¨¡å—</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>ğŸ‘†è¿™é‡Œä»¿ç…§webpackå®šä¹‰ä¸€ä¸ª <code>publicPath</code>ï¼Œç”¨äºå¤„ç†ç›¸å¯¹è·¯å¾„æ—¶çš„å…¬å…±è·¯å¾„å‰ç¼€ï¼Œé…åˆæˆ‘ä»¬æŠŠä»£ç æŠ½ç¦»åˆ°coreæ–‡ä»¶å¤¹å’Œåœ¨expampleæ–‡ä»¶å¤¹è¿è¡Œ</p><p>å…³äºèµ„æºè·¯å¾„å±äº <code>node_module</code>çš„æƒ…å†µï¼Œä¼šé€çº§æŸ¥æ‰¾èµ„æºï¼Œå¦‚ä¸‹è§„åˆ™ï¼Œè¿™é‡Œä¸åšå®ç°</p><ul><li>åœ¨å½“å‰ç›®å½•ä¸‹çš„ node_modules ç›®å½•æŸ¥æ‰¾ã€‚</li><li>å¦‚æœæ²¡æœ‰ï¼Œåœ¨çˆ¶çº§ç›®å½•çš„ node_modules æŸ¥æ‰¾ï¼Œå¦‚æœæ²¡æœ‰åœ¨çˆ¶çº§ç›®å½•çš„çˆ¶çº§ç›®å½•çš„ node_modules ä¸­æŸ¥æ‰¾ã€‚</li><li>æ²¿ç€è·¯å¾„å‘ä¸Šé€’å½’ï¼Œç›´åˆ°æ ¹ç›®å½•ä¸‹çš„ node_modules ç›®å½•ã€‚</li><li>åœ¨æŸ¥æ‰¾åˆ°ç¬¬ä¸‰æ–¹æ¨¡å—åï¼Œä¼šæ‰¾ <code>package.json</code> ä¸‹ main å±æ€§æŒ‡å‘çš„æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰ <code>package.json</code> ï¼Œåœ¨ nodejs ç¯å¢ƒä¸‹ä¼šä¾æ¬¡æŸ¥æ‰¾ <code>index.js ï¼Œindex.json ï¼Œindex.node</code>ã€‚</li></ul><p>æ”¹é€ å <code>myrequire()</code></p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">myrequire</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">filePath</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">å¼€å§‹å¼•å…¥</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">filePath</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">newPath</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">dealFilePath</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">filePath</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// å¤„ç†èµ„æºè·¯å¾„</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">fileContent</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">fileContent</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">fs</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">readFileSync</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">newPath</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">utf8</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;font-style:italic;">catch</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">err</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">æ²¡æœ‰æ‰¾åˆ°å¼•ç”¨èµ„æº</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">newPath</span><span style="color:#89DDFF;">}\`</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">fileContent</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">wrap</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">fileContent</span><span style="color:#F07178;">)(</span><span style="color:#A6ACCD;">myrequire</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h4 id="_3-requireå¤„ç†èµ„æºé˜²æ­¢å¥—å¨ƒå¼•ç”¨" tabindex="-1">3. requireå¤„ç†èµ„æºé˜²æ­¢å¥—å¨ƒå¼•ç”¨ <a class="header-anchor" href="#_3-requireå¤„ç†èµ„æºé˜²æ­¢å¥—å¨ƒå¼•ç”¨" aria-hidden="true">#</a></h4><p>reuqireé¡ºåºæ˜¯æ·±åº¦ä¼˜å…ˆéå†</p><blockquote><p>è¿™é‡Œçš„æ·±åº¦ä¼˜å…ˆå¹¶ä¸æ˜¯æ¨¡å—åŒ–å·¥å…·åœ¨åšé€’å½’ï¼Œè€Œæ˜¯èµ„æºå¼•ç”¨çš„å†™æ³•ï¼šæ¯æ¬¡åœ¨ä¸åŒæ–‡ä»¶ä¸‹<code>require</code>ï¼Œå› ä¸ºæ˜¯åŒæ­¥æ‰§è¡Œè‡ªç„¶è€Œç„¶å½¢æˆçš„åµŒå¥—è°ƒç”¨</p></blockquote><p>indexå¼•ç”¨aã€bï¼Œaæ–‡ä»¶å¼•ç”¨bï¼Œbæ–‡ä»¶å¼•ç”¨aï¼ŒnodeåŸç”ŸCommonjsæ‰§è¡Œé¡ºåº</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#A6ACCD;">å¼€å§‹å¼•å…¥index</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js</span></span>
<span class="line"><span style="color:#A6ACCD;">å¼€å§‹å¼•å…¥a</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js </span></span>
<span class="line"><span style="color:#A6ACCD;">å¼€å§‹å¼•å…¥b</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">js</span><span style="color:#A6ACCD;"> (bæœ‰å¼•a</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">ä½†æ˜¯ä¸ä¼šè§¦å‘å¼€å§‹å¼•å…¥å’Œæ‰§è¡Œa)</span></span>
<span class="line"><span style="color:#A6ACCD;">æ‰§è¡Œb</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js</span></span>
<span class="line"><span style="color:#A6ACCD;">æ‰§è¡Œa</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js</span></span>
<span class="line"><span style="color:#A6ACCD;">æ‰§è¡Œindex</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js</span></span>
<span class="line"></span></code></pre></div><p>å¯ä»¥çœ‹å‡ºä¸ä¼šé‡å¤å¼•ç”¨</p><p>å®ç°åŸç†ï¼šå’Œé€’å½’éå†ç±»ä¼¼ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªweakmapæˆ–è€…ä¸€ä¸ªå˜é‡å­˜å‚¨è°ƒç”¨è¿‡çš„èµ„æºæ–‡ä»¶ï¼Œå› ä¸ºåšå¼•å…¥æŠ›å‡ºä¹Ÿæ˜¯å­˜å‚¨çš„æ—¶å€™è¦ç”¨åˆ°Modulesçš„å˜é‡ï¼Œæ‰€ä»¥ç›´æ¥ç”¨ä¸€ä¸ªModuleså­˜å‚¨å¼•ç”¨è¿‡çš„æ–‡ä»¶,æŠŠèµ„æºè·¯å¾„ä½œä¸ºæ•°ç»„idå­˜å‚¨</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> Modules </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> []</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// åšå…¨å±€å˜é‡</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">cacheModule</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">filePath</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">isExist</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Modules</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">some</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;font-style:italic;">item</span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;">item</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">id</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">filePath</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">isExist</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">Modules</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">push</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      id</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">filePath</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">isExist</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>æ”¹é€ å <code>myrequire()</code></p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">myrequire</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">filePath</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">å¼€å§‹å¼•å…¥</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">filePath</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">newPath</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">dealFilePath</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">filePath</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">isExist</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">cacheModule</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">newPath</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// åˆ¤æ–­æ˜¯å¦åŠ è½½è¿‡</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">isExist</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// åŠ è½½è¿‡ä¸å†é‡å¤åŠ è½½</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">fileContent</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">fileContent</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">fs</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">readFileSync</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">newPath</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">utf8</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;font-style:italic;">catch</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">err</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">æ²¡æœ‰æ‰¾åˆ°å¼•ç”¨èµ„æº</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">newPath</span><span style="color:#89DDFF;">}\`</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">fileContent</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">wrap</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">fileContent</span><span style="color:#F07178;">)(</span><span style="color:#A6ACCD;">myrequire</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h4 id="_4-å¼•ç”¨å’ŒæŠ›å‡ºå˜é‡" tabindex="-1">4. å¼•ç”¨å’ŒæŠ›å‡ºå˜é‡ <a class="header-anchor" href="#_4-å¼•ç”¨å’ŒæŠ›å‡ºå˜é‡" aria-hidden="true">#</a></h4><p>æŠ›å‡ºå’Œæ¥æ”¶æ˜¯ä½¿ç”¨æ¨¡å—åŒ–ç¼–ç¨‹æ—¶çš„ç›´è§‚æ„Ÿå— å®é™…ä¸Šâ€œæŠ›å‡ºâ€çš„åŠ¨ä½œæ˜¯æ–‡ä»¶æŠŠå€¼å­˜åˆ°exporté‡Œ è€Œâ€œæ¥æ”¶â€å°±æ˜¯requireå»exportå¯¹è±¡ä¸­å–å€¼(requireè¿˜æœ‰æŠ“å–ã€åŒ…è£…æ–‡ä»¶å†…å®¹çš„ä½œç”¨) å‰é¢æåˆ°å¼•ç”¨å’ŒæŠ›å‡ºçš„æœ¬è´¨æ˜¯å­˜å‚¨å’Œè·å–ï¼Œä¸”æ¯æ¬¡åŠ è½½èµ„æºéƒ½æœ‰ä¸€ä¸ªæ•°ç»„å­˜å‚¨èµ„æºçš„ä¿¡æ¯ï¼Œæˆ‘ä»¬å¾€Moduleså…¨å±€å˜é‡ä¸­å­˜å‚¨ç›¸åº”è¦æŠ›å‡ºçš„å˜é‡å³å¯</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> Modules </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> []</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">cacheModule</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">filePath</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">isExist</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Modules</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">some</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;font-style:italic;">item</span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;">item</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">id</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">filePath</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">isExist</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">Modules</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">push</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      id</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">filePath</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      exports</span><span style="color:#89DDFF;">:{}</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// åŠ ä¸€ä¸ªå­˜å‚¨å˜é‡çš„åœ°æ–¹</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">isExist</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>åŸç”Ÿnodejsçš„Commonjsçš„ä½¿ç”¨æ–¹æ³•æ˜¯ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&#39;&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">exports.</span><span style="color:#A6ACCD;">a </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;&#39;</span></span>
<span class="line"></span></code></pre></div><p>ğŸ‘†è¿™é‡Œä¸¤ç§å­˜å‚¨å˜é‡çš„å½¢å¼ï¼Œæœ¬è´¨éƒ½æ˜¯å¾€å…¨å±€å˜é‡Modulesé‡Œçš„exportsè¿›è¡Œå­˜å‚¨ï¼Œå› æ­¤ä¸¤è€…ä½¿ç”¨çš„åŒºåˆ«ï¼Œè¯·åœ¨å®ç°ä¹‹åè‡ªè¡Œæ€è€ƒï¼Œæœ¬è´¨åŒºåˆ«å°±æ˜¯æ“ä½œå¯¹è±¡èµ‹å€¼çš„åŒºåˆ«è€Œå·²</p><p>æˆ‘ä»¬å¾€jsé‡Œæ³¨å…¥æ–¹æ³•çš„æ—¶å€™åªæ³¨å…¥äº†myrequireï¼Œè¿™æ¬¡å†å¾€é‡Œæ³¨å…¥moduleå’Œexports</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// myrequire() çš„æ³¨å…¥å˜é‡ä»£ç ç‰‡æ®µ</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> index </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Modules</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">findIndex</span><span style="color:#A6ACCD;">(</span><span style="color:#A6ACCD;font-style:italic;">item</span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;">item</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">id</span><span style="color:#89DDFF;">===</span><span style="color:#A6ACCD;">newPath)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// æ³¨å…¥å¤šä¸¤ä¸ªå˜é‡ module å’Œ exports</span></span>
<span class="line"><span style="color:#82AAFF;">wrap</span><span style="color:#A6ACCD;">(fileContent)(myrequire</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">Modules[index]</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">Modules[index]</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">exports)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>ğŸ‘†è¿™æ ·æˆ‘ä»¬å®ç°äº†èµ„æºæ–‡ä»¶çš„å­˜å‚¨å˜é‡ï¼Œæ¥ä¸‹æ¥è¦å®ç°è·å–å­˜å‚¨çš„å˜é‡ï¼Œä¹Ÿå°±æ˜¯åœ¨<code>myrequire()</code>ä¹‹åè¿”å›å‡ºèµ„æºå­˜å‚¨çš„æ•´ä¸ªå¯¹è±¡exportså³å¯</p><p>æ”¹é€ å <code>myrequire()</code></p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">myrequire</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">filePath</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">å¼€å§‹å¼•å…¥</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">filePath</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">newPath</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">dealFilePath</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">filePath</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">isExist</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">cacheModule</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">newPath</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">isExist</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">fileContent</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">fileContent</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">fs</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">readFileSync</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">newPath</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">utf8</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;font-style:italic;">catch</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">err</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">æ²¡æœ‰æ‰¾åˆ°å¼•ç”¨èµ„æº</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">newPath</span><span style="color:#89DDFF;">}\`</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// æ³¨å…¥ å­˜å‚¨ç”¨çš„ä¸¤ä¸ªå˜é‡ module å’Œ exports</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">index</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Modules</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">findIndex</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;font-style:italic;">item</span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;">item</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">id</span><span style="color:#89DDFF;">===</span><span style="color:#A6ACCD;">newPath</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">wrap</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">fileContent</span><span style="color:#F07178;">)(</span><span style="color:#A6ACCD;">myrequire</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">Modules</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">index</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">Modules</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">index</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">exports</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// è¿”å›èµ„æºæ–‡ä»¶å­˜å‚¨çš„å˜é‡exports</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Modules</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">index</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">exports</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h4 id="_5-æ•´ç†" tabindex="-1">5. æ•´ç† <a class="header-anchor" href="#_5-æ•´ç†" aria-hidden="true">#</a></h4><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»ä»0åˆ°1å®ç°äº†ä¸€ä¸ªç®€æ˜“ç‰ˆçš„ <code>Commonjs</code></p><p>å¹¶ä¸”ç”±æ­¤å¯çŸ¥å‡ ä¸ª<strong>Commonjsçš„ç‰¹æ€§ï¼š</strong></p><ul><li><strong>åŠ è½½èµ„æºæ˜¯åŒæ­¥åŠ è½½çš„</strong>ï¼Œå³å¦‚æœèµ„æºå¾ˆå¤§è¿˜æ˜¯ä¼šé˜»å¡åé¢èµ„æºçš„åŠ è½½</li><li>èµ„æºå¥—å¨ƒå¼•ç”¨æˆ–é‡å¤å¼•ç”¨ï¼Œ<strong>ä¸ä¼šé‡å¤åŠ è½½</strong></li><li><strong>exportsæŠ›å‡ºçš„å˜é‡æ˜¯å€¼çš„æ‹·è´</strong>ï¼Œå–å†³äºåŠ è½½èµ„æºæ—¶è¿›è¡Œå­˜å‚¨çš„å˜é‡æ˜¯ä»€ä¹ˆï¼Œåç»­ä¸ä¼šæ›´æ–°å­˜å‚¨çš„å˜é‡(å³æŠ›å‡ºçš„å€¼æ˜¯é™æ€çš„)</li><li>æ‰§è¡Œrequireï¼Œä¼šåŠ è½½<strong>èµ„æºå­˜å‚¨çš„æ‰€æœ‰å˜é‡</strong>åˆ°æœ¬æ–‡ä»¶</li></ul><h3 id="commonjsè·å–åŠ¨æ€å€¼" tabindex="-1">Commonjsè·å–åŠ¨æ€å€¼ <a class="header-anchor" href="#commonjsè·å–åŠ¨æ€å€¼" aria-hidden="true">#</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// lib.js</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> counter </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">changeCounter</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">counter</span><span style="color:#89DDFF;">++;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">getCounter</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">counter</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  changeCounter</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre></div><p>è¿™æ ·å°±å¯ä»¥æ‹¿åˆ°æ·±æ‹·è´çš„å€¼ï¼Œå› ä¸ºå¹¶ä¸æ˜¯æ‹¿æ‹·è´çš„å€¼ï¼Œè€Œæ˜¯é€šè¿‡å‡½æ•°ä½œç”¨åŸŸå»å–å€¼ï¼Œä½œç”¨åŸŸå†…çš„å€¼å˜äº†ï¼Œå–åˆ°å€¼å°±å˜äº†ã€‚</p><h3 id="å…³äºcommonjsçš„requireæ˜¯åŠ¨æ€å¼•ç”¨" tabindex="-1">å…³äºCommonjsçš„requireæ˜¯åŠ¨æ€å¼•ç”¨ <a class="header-anchor" href="#å…³äºcommonjsçš„requireæ˜¯åŠ¨æ€å¼•ç”¨" aria-hidden="true">#</a></h3><blockquote><p>Commonjsçš„<code>require()</code>å‘ç”Ÿåœ¨è¿è¡Œæ—¶ é¦–å…ˆæ˜ç¡®ä¸€ç‚¹ï¼ŒåŠ¨æ€çš„æ¦‚å¿µä¸ç­‰äºå¼‚æ­¥çš„æ¦‚å¿µ</p></blockquote><p>åŠ¨æ€å¼•ç”¨æ˜¯åœ¨æ¡ä»¶ä½œç”¨åŸŸé‡Œrequireï¼Œåªæœ‰åœ¨è°ƒç”¨è¯¥å‡½æ•°æ‰ä¼šè¿è¡Œå¼•ç”¨èµ„æºï¼Œè¿è¡Œæ—¶æ‰å»è·å–å¯¹åº”çš„å†…å®¹</p><p>è€ŒåŠ¨æ€å¼•ç”¨åˆ†ä¸¤ç§æƒ…å†µ</p><ul><li>ä¸éœ€è¦æ‰§è¡Œå°±å·²çŸ¥èµ„æºè·¯å¾„çš„æƒ…å†µ</li><li>éœ€è¦æ‰§è¡Œæ‰çŸ¥é“èµ„æºè·¯å¾„çš„æƒ…å†µ å¦‚:</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 1.ä¸éœ€è¦æ‰§è¡Œå°±å·²çŸ¥èµ„æºè·¯å¾„çš„æƒ…å†µ</span></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#C792EA;">=&gt;</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">require</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./a.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">},</span><span style="color:#F78C6C;">1000</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 2.éœ€è¦æ‰§è¡Œæ‰çŸ¥é“èµ„æºè·¯å¾„çš„æƒ…å†µ</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">a</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">x</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">filePath</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">require</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onclick</span><span style="color:#89DDFF;">(){</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">a</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./a.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>åœ¨webpacké‡Œrequireçš„èµ„æºæ˜¯ä¸ªæœªçŸ¥çš„å˜é‡ï¼ˆè¿è¡Œæ—¶æ‰å¯çŸ¥ï¼‰çš„è¯ï¼Œä¸Šçº¿ä¹‹åä¼šåŠ è½½ä¸åˆ°è¯¥æ–‡ä»¶ã€‚ä¸ºä»€ä¹ˆnodejså¯ä»¥åŠ è½½ï¼Œwebpackä¸è¡Œï¼Ÿ</p><blockquote><p>æ˜¯å› ä¸ºåœ¨æœ¬åœ°nodeç¯å¢ƒä¸‹ï¼ŒåŠ¨æ€requireè¿è¡Œæ—¶å¯ä»¥æ‰¾åˆ°æ–‡ä»¶ï¼Œå¦‚æœåŠ¨æ€requireçš„æ–‡ä»¶æ˜¯æœ¬åœ°ä¸å­˜åœ¨çš„è¯ï¼Œä¹Ÿæ˜¯ä¼šåƒwebpackä¸€æ ·æŠ¥é”™æ‰¾ä¸åˆ°çš„ è€Œwebpackæ‰“åŒ…ä¸ä¼šè¿è¡ŒæœªçŸ¥çš„ä»£ç (ä¼šæ”¶é›†å·²çŸ¥çš„requireèµ„æº),æ‰€ä»¥ä¸ä¼šçŸ¥é“åŠ¨æ€requireçš„æ–‡ä»¶æ˜¯ä»€ä¹ˆï¼Œå°±ä¸ä¼šæŠŠç›®æ ‡æ–‡ä»¶æ‰“åŒ…è¿›é¡¹ç›®ï¼Œæœ€åè¿è¡Œæ—¶æœåŠ¡å™¨ä¸­æ‰¾ä¸åˆ°è¯¥æ–‡ä»¶å°±ä¼šæŠ¥é”™</p></blockquote><p>å…³äºå¼‚æ­¥åŠ è½½ï¼š å¸Œæœ›ç‚¹å‡»æ‰åŠ è½½aæ–‡ä»¶ï¼Œåœ¨Commonjsé‡Œï¼Œindexä¾èµ–aå³ä½¿åœ¨æ¡ä»¶ä½œç”¨åŸŸé‡Œï¼Œä¹Ÿå¿…é¡»åˆå§‹åŒ–çš„æ—¶å€™å°±åŠ è½½è¿›æ¥ï¼Œç‚¹å‡»æ—¶åªæ˜¯è·å–å¹¶æ‰§è¡Œaï¼Œå¹¶ä¸æ˜¯ç‚¹å‡»æ—¶æ‰å»æ‰¾aæ–‡ä»¶è¿›è¡ŒåŠ è½½å’Œæ‰§è¡Œ</p><h3 id="ä¸ç”¨exports-xx-è€Œæ˜¯exports-xx-æ¥å­˜å‚¨å˜é‡ä¼šæ€æ ·" tabindex="-1">ä¸ç”¨exports.xx=&#39;&#39; è€Œæ˜¯exports={xx:&#39;&#39;} æ¥å­˜å‚¨å˜é‡ä¼šæ€æ · <a class="header-anchor" href="#ä¸ç”¨exports-xx-è€Œæ˜¯exports-xx-æ¥å­˜å‚¨å˜é‡ä¼šæ€æ ·" aria-hidden="true">#</a></h3><blockquote><p><code>module.exports = {}</code>ã€<code>exports.xx=&#39;&#39;</code> åŒæ ·æ˜¯æ“ä½œexportså­˜å‚¨å¯¹è±¡ï¼Œé‚£å¯ä¸å¯ä»¥<code>exports = {}</code>å‘¢ï¼Ÿ</p></blockquote><p>æˆ‘ä»¬çŸ¥é“exportsçš„æ¥æºæ˜¯æ³¨å…¥åˆ°å‡½æ•°é‡Œçš„å½¢å‚ ä¹Ÿå°±æ˜¯ğŸ‘‡çš„å½¢å¼ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> exports </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">a</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">exports</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">exports</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">b</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">b</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">a</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">exports</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">exports</span><span style="color:#A6ACCD;">) </span><span style="color:#676E95;font-style:italic;">// {a:&#39;a&#39;}</span></span>
<span class="line"></span></code></pre></div><p>ğŸ‘†å‡½æ•°çš„å¼•ç”¨ç±»å‹å½¢å‚åšé‡æ–°èµ‹å€¼ï¼Œåœ¨å‡½æ•°ä½“ä¸­å°†ä¼šæ˜¯ä¸ªæ–°çš„å˜é‡ï¼Œè€Œä¸æ˜¯å¤–éƒ¨çš„å˜é‡ æ˜¯jsåŸç”Ÿè¿™ä¹ˆå¹²çš„ï¼Œä¸å…³nodejsçš„<code>Commonjsæœºåˆ¶</code>çš„äº‹</p><p>åœ¨requireä¸­ï¼Œexportsæ˜¯æ–‡ä»¶èµ„æºä¿¡æ¯å¯¹è±¡é‡Œçš„ä¸€ä¸ªå±æ€§ï¼Œå¦‚æœåœ¨æ–‡ä»¶ä¸­è‡ªå·±é‡æ–°èµ‹å€¼äº†exportsï¼Œå› ä¸ºä¸€ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªå•ç‹¬çš„ä½œç”¨åŸŸå‡½æ•°ï¼Œexportså°†æ˜¯ä¸€ä¸ªä½œç”¨åŸŸä¸‹å…¨æ–°çš„å˜é‡ï¼Œè€Œä¸å†æ˜¯å¤–éƒ¨æ–‡ä»¶å¯¹è±¡é‡Œçš„å±æ€§ï¼Œé‚£ä¹ˆrequireå°±å–ä¸åˆ°æ–‡ä»¶æŠ›å‡ºçš„ä¿¡æ¯äº†</p>`,108),c=s("p",{xx:""},"è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆæŠ›å‡ºæ•°æ®åªèƒ½exports.xx ä¸€ä¸ªä¸ªæŠ›å‡º(å­˜å‚¨)è€Œä¸èƒ½ç›´æ¥exports =",-1),r=n(`<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> module </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">myexports</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ä¼ å…¥çš„æ˜¯module.myexportså¼•ç”¨ç±»å‹ï¼Œå¦‚æœé‡æ–°èµ‹å€¼äº†myexportså°†ä¸å†æœ‰å¼•ç”¨ä½œç”¨è€Œæ˜¯ä¸€ä¸ªæ–°çš„å¯¹è±¡</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">a</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">myexports</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">myexports</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// --&gt;{ myexports: {a:&#39;1&#39;} }</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// myexports.b = &#39;b&#39; // --&gt;{ myexports: {b: &#39;b&#39;} }</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#82AAFF;">a</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">module.</span><span style="color:#A6ACCD;">myexports)</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">module</span><span style="color:#A6ACCD;">) </span><span style="color:#676E95;font-style:italic;">// --&gt;{ myexports: {a:&#39;1&#39;} }</span></span>
<span class="line"></span></code></pre></div><h2 id="es-module" tabindex="-1">ES Module <a class="header-anchor" href="#es-module" aria-hidden="true">#</a></h2><h3 id="nodeç¯å¢ƒ" tabindex="-1">nodeç¯å¢ƒ <a class="header-anchor" href="#nodeç¯å¢ƒ" aria-hidden="true">#</a></h3><p><code>node 8.5</code>å¼€å§‹æ”¯æŒmjsï¼Œä½†æ˜¯è¿˜æ˜¯å®éªŒæ€§çš„æ‰€ä»¥éœ€è¦å‚æ•°<code>--experimental-modules</code> æ‰§è¡Œ.mjs ä¼šæç¤ºESMæ˜¯å®éªŒæ€§</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">node</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--experimental-modules</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">index.mjs</span></span>
<span class="line"><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">node:9076</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> ExperimentalWarning: The ESM module loader is experimental.</span></span>
<span class="line"></span></code></pre></div><p><code>node13</code>å¼€å§‹ä¸éœ€è¦å®éªŒå‚æ•°,å¯ä»¥ç›´æ¥æ‰§è¡Œ.mjs .mjså¯ä»¥ç”¨ESMï¼Œå¹¶ä¸”è¿˜æ˜¯æ”¯æŒåŸæ¥Commonjs</p><h3 id="æµè§ˆå™¨ç¯å¢ƒ" tabindex="-1">æµè§ˆå™¨ç¯å¢ƒ <a class="header-anchor" href="#æµè§ˆå™¨ç¯å¢ƒ" aria-hidden="true">#</a></h3><blockquote><p>å’Œnodeç¯å¢ƒç”¨mjsåç¼€çš„æ–¹å¼ä¸åŒï¼Œåœ¨æµè§ˆå™¨ç¯å¢ƒä¸è®¤è¯†mjsï¼Œmjsæ˜¯nodeè‡ªå·±æ–°å¢çš„</p></blockquote><p>æµè§ˆå™¨éœ€è¦ä¸å½±å“ä»¥å¾€çš„æ²¡æœ‰æ¨¡å—åŒ–çš„jsï¼Œæ‰€ä»¥è¦æ”¯æŒæ¨¡å—åŒ–æ—¶åœ¨<code>&lt;srcipt&gt;</code>æ ‡ç­¾åŠ ä¸Štype</p><h4 id="scriptæ ‡ç­¾çš„asyncã€defer" tabindex="-1">scriptæ ‡ç­¾çš„asyncã€defer <a class="header-anchor" href="#scriptæ ‡ç­¾çš„asyncã€defer" aria-hidden="true">#</a></h4><p>åœ¨è®²<code>type=module</code>ä¹‹å‰ï¼Œæˆ‘ä»¬çœ‹çœ‹å…¶ä»–å±æ€§ é»˜è®¤sciptæ ‡ç­¾éƒ½æ˜¯åŒæ­¥åŠ è½½ï¼Œå³æŒ‰é¡ºåºåŠ è½½scriptæ ‡ç­¾å¹¶ä¼šé˜»å¡åé¢çš„åŠ è½½ æµè§ˆå™¨æä¾›sciptè¯†åˆ«ä¸ºéœ€è¦å¼‚æ­¥åŠ è½½èµ„æº<code>asyncã€deferã€module</code>éƒ½æ˜¯å¼‚æ­¥åŠ è½½çš„</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./1.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">defer</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./2.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">async</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><ul><li><code>defer</code>è¦ç­‰åˆ°æ•´ä¸ªé¡µé¢åœ¨å†…å­˜ä¸­æ­£å¸¸æ¸²æŸ“ç»“æŸï¼ˆ<code>DOM</code> ç»“æ„å®Œå…¨ç”Ÿæˆï¼Œä»¥åŠå…¶ä»–è„šæœ¬æ‰§è¡Œå®Œæˆï¼‰ï¼Œæ‰ä¼šæ‰§è¡Œ(å³ä½¿å·²ç»ä¸‹è½½å®Œæˆäº†)</li><li><code>async</code>ä¸€æ—¦ä¸‹è½½å®Œï¼Œæ¸²æŸ“å¼•æ“å°±ä¼šä¸­æ–­æ¸²æŸ“ï¼Œæ‰§è¡Œè¿™ä¸ªè„šæœ¬ä»¥åï¼Œå†æ¢å¤æ¸²æŸ“</li></ul><p>æµè§ˆå™¨çš„V8å¼•æ“ï¼Œæ¸²æŸ“é¡µé¢å’Œæ‰§è¡Œjsæ˜¯å…±ç”¨ä¸€ä¸ªçº¿ç¨‹çš„ï¼Œæ‰€ä»¥ä¼šäº¤é”™æ‰§è¡Œå¦‚ğŸ‘†<code>async</code>çš„åœºæ™¯ã€‚</p><p><code>defer</code>æ˜¯â€œæ¸²æŸ“å®Œå†æ‰§è¡Œâ€ï¼Œ<code>async</code>æ˜¯â€œä¸‹è½½å®Œå°±æ‰§è¡Œâ€ã€‚å¦å¤–ï¼Œå¦‚æœæœ‰å¤šä¸ªdeferè„šæœ¬ï¼Œä¼šæŒ‰ç…§å®ƒä»¬åœ¨é¡µé¢å‡ºç°çš„é¡ºåºåŠ è½½ï¼Œè€Œå¤šä¸ª<code>async</code>è„šæœ¬æ˜¯ä¸èƒ½ä¿è¯åŠ è½½é¡ºåºçš„ã€‚</p><h4 id="type-module" tabindex="-1">type=module <a class="header-anchor" href="#type-module" aria-hidden="true">#</a></h4><p>å› ä¸º<code>type=&quot;module&quot;</code>é»˜è®¤å°±æ˜¯å¼‚æ­¥åŠ è½½çš„ï¼Œæ‰€ä»¥ä¹Ÿè¦æœ‰ä¸ªå¼‚æ­¥è§„åˆ™ï¼Œé‚£å°±æ˜¯<code>defer</code> æ‰€ä»¥ğŸ‘‡å…¶å®å°±æ˜¯ä¸€ç§çœç•¥é»˜è®¤å€¼çš„å†™æ³•</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./1.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">&lt;!-- ç­‰åŒäº --&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./1.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">defer</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>å’Œ<code>defer</code>åŸºæœ¬ç›¸åŒï¼Œç­‰é¡µé¢æ¸²æŸ“ç»“æŸï¼Œæ‰æŒ‰é¡ºåºæ‰§è¡Œèµ„æº(å³ä½¿å·²ç»ä¸‹è½½å®Œèµ„æº)</p><p>è€Œå¦‚æœæ˜¯<code>async</code></p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./1.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">async</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>åˆ™ä¼šæ˜¯ä¸€æ—¦ä¸‹è½½å®Œï¼Œæ¸²æŸ“å¼•æ“å°±ä¼šä¸­æ–­æ¸²æŸ“ï¼Œæ‰§è¡Œè¿™ä¸ªè„šæœ¬ä»¥åï¼Œå†æ¢å¤æ¸²æŸ“ï¼Œå¹¶ä¸”ä¸ä¿è¯é¡ºåº</p><p>ç”±ğŸ‘†<code>type=&quot;module&quot;</code>ï¼Œæ›´å¤šçš„æ˜¯è®©æ–‡ä»¶å†…éƒ¨å¯ä»¥ä½¿ç”¨ESMæ¨¡å—åŒ–ï¼Œæ§åˆ¶å¼‚æ­¥è§„åˆ™è¿˜æ˜¯é <code>deferã€async</code><code>ES Module</code>é™¤äº†åŠ è½½è§„åˆ™è·Ÿå¼‚æ­¥åŠ è½½èµ„æºç›¸åŒå¤–ï¼Œå†…éƒ¨æ˜¯æ”¯æŒç›´æ¥ä½¿ç”¨importçš„ã€‚è€Œè¿™æ˜¯åªå¼€å¯å¼‚æ­¥åŠ è½½çš„èµ„æºæ–‡ä»¶æ— æ³•åšåˆ°çš„</p><h3 id="esmè¯†åˆ«çš„èµ„æºè·¯å¾„" tabindex="-1">ESMè¯†åˆ«çš„èµ„æºè·¯å¾„ <a class="header-anchor" href="#esmè¯†åˆ«çš„èµ„æºè·¯å¾„" aria-hidden="true">#</a></h3><p>å›å¿†ä¸€ä¸‹ <code>Commonjs</code>è¯†åˆ«èµ„æºçš„è·¯å¾„æœ‰<code>ç›¸å¯¹è·¯å¾„</code>ã€<code>ç»å¯¹è·¯å¾„</code>ã€<code>nodejså†…ç½®æ¨¡å—</code>ã€<code>node_moduleç¬¬ä¸‰æ–¹èµ„æº</code></p><p>é‚£ESMçš„èµ„æºè·¯å¾„ï¼š<code>ç›¸å¯¹è·¯å¾„</code>ã€<code>ç»å¯¹è·¯å¾„</code>ã€<code>ç¬¬ä¸‰æ–¹èµ„æºURl</code></p><p><code>import</code>ç¬¬ä¸‰æ–¹èµ„æºåªèƒ½å¼•ç”¨<code>å®Œæ•´çš„ URL</code>ï¼Œç›¸å¯¹ä»¥å‰çš„è£¸å¯¼å…¥ (bare import specifiers)(äººè¯å°±æ˜¯ç›´æ¥é€šè¿‡æ¨¡å—åå¯¼å…¥)ï¼Œå¾ˆä¸å¤ªæ–¹ä¾¿ï¼Œå¦‚ä¸‹ä¾‹:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> lodash </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">lodash</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span></code></pre></div><p>å®ƒä¸åŒäº Node.JS å¯ä»¥ä¾èµ–ç³»ç»Ÿæ–‡ä»¶ç³»ç»Ÿï¼Œå±‚å±‚å¯»æ‰¾ <code>node_modules</code></p><p>åœ¨ ESM ä¸­ï¼Œå¯é€šè¿‡ <code>importmap</code> ä½¿å¾—è£¸å¯¼å…¥å¯æ­£å¸¸å·¥ä½œ:</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">importmap</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  &quot;imports&quot;: {</span></span>
<span class="line"><span style="color:#A6ACCD;">    &quot;lodash&quot;: &quot;https://cdn.sykpack.dev/lodash&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">    &quot;ms&quot;: &quot;https://cdn.sykpack.dev/ms&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">lodash</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>åŠ äº†ä¸Šé¢çš„mapï¼Œæµè§ˆå™¨å°±æ”¯æŒé€šè¿‡åˆ«åç›´æ¥å¼•å…¥æ¨¡å—äº†</p><p>è¡¥å……ä¸€ç‚¹ï¼šå¹³æ—¶å¯ä»¥åˆ°è¿™é‡Œ <a href="https://npm.devtool.tech/" target="_blank" rel="noreferrer">https://npm.devtool.tech/</a> æŸ¥çœ‹å„ç§ç¬¬ä¸‰æ–¹åŒ…çš„cdnï¼Œçœ‹çœ‹åˆ«äººçš„å¯¼å‡ºæ–¹å¼ ğŸ‘‡æµè§ˆå™¨çš„æ§åˆ¶å°å¯ä»¥ç›´æ¥ä½¿ç”¨ESMçš„CDN</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> lodash </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">https://cdn.skypack.dev/lodash</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> lodash</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><h3 id="æ¥æ”¶çš„æ˜¯åŠ¨æ€çš„å€¼" tabindex="-1">æ¥æ”¶çš„æ˜¯åŠ¨æ€çš„å€¼ <a class="header-anchor" href="#æ¥æ”¶çš„æ˜¯åŠ¨æ€çš„å€¼" aria-hidden="true">#</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">bar</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> foo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">baz</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">500</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>ä¸Šé¢ä»£ç è¾“å‡ºå˜é‡ foo ï¼Œå€¼ä¸º bar ï¼Œ500 æ¯«ç§’ä¹‹åå˜æˆ baz ã€‚</p><p>è¿™ä¸€ç‚¹ä¸ CommonJS è§„èŒƒå®Œå…¨ä¸åŒã€‚CommonJS æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„ç¼“å­˜ï¼Œä¸å­˜åœ¨åŠ¨æ€æ›´æ–°(å¦‚æœæ˜¯å¼•ç”¨ç±»å‹ä¹Ÿä¸è¡Œï¼Œå› ä¸ºæ˜¯è¿è¡Œæ—¶è¿›è¡Œå­˜å‚¨çš„å€¼çš„æ‹·è´)</p><h3 id="esmè‡ªåŠ¨ä¸¥æ ¼æ¨¡å¼" tabindex="-1">ESMè‡ªåŠ¨ä¸¥æ ¼æ¨¡å¼ <a class="header-anchor" href="#esmè‡ªåŠ¨ä¸¥æ ¼æ¨¡å¼" aria-hidden="true">#</a></h3><p>ES6 çš„æ¨¡å—è‡ªåŠ¨é‡‡ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œä¸ç®¡ä½ æœ‰æ²¡æœ‰åœ¨æ¨¡å—å¤´éƒ¨åŠ ä¸Š<code>&quot;use strict&quot;</code>;ã€‚</p><p>ä¸¥æ ¼æ¨¡å¼ä¸»è¦æœ‰ä»¥ä¸‹é™åˆ¶:</p><ul><li>å˜é‡å¿…é¡»å£°æ˜åå†ä½¿ç”¨</li><li>å‡½æ•°çš„å‚æ•°ä¸èƒ½æœ‰åŒåå±æ€§ï¼Œå¦åˆ™æŠ¥é”™</li><li>ä¸èƒ½ä½¿ç”¨withè¯­å¥</li><li>ä¸èƒ½å¯¹åªè¯»å±æ€§èµ‹å€¼ï¼Œå¦åˆ™æŠ¥é”™</li><li>ä¸èƒ½ä½¿ç”¨å‰ç¼€ 0 è¡¨ç¤ºå…«è¿›åˆ¶æ•°ï¼Œå¦åˆ™æŠ¥é”™</li><li>ä¸èƒ½åˆ é™¤ä¸å¯åˆ é™¤çš„å±æ€§ï¼Œå¦åˆ™æŠ¥é”™</li><li>ä¸èƒ½åˆ é™¤å˜é‡delete propï¼Œä¼šæŠ¥é”™ï¼Œåªèƒ½åˆ é™¤å±æ€§delete global[prop]</li><li><code>eval</code>ä¸ä¼šåœ¨å®ƒçš„å¤–å±‚ä½œç”¨åŸŸå¼•å…¥å˜é‡</li><li><code>eval</code>å’Œ<code>arguments</code>ä¸èƒ½è¢«é‡æ–°èµ‹å€¼</li><li>argumentsä¸ä¼šè‡ªåŠ¨åæ˜ å‡½æ•°å‚æ•°çš„å˜åŒ–</li><li>ä¸èƒ½ä½¿ç”¨arguments.callee</li><li>ä¸èƒ½ä½¿ç”¨arguments.caller</li><li>ç¦æ­¢thisæŒ‡å‘å…¨å±€å¯¹è±¡</li><li>ä¸èƒ½ä½¿ç”¨fn.callerå’Œfn.argumentsè·å–å‡½æ•°è°ƒç”¨çš„å †æ ˆ</li><li>å¢åŠ äº†ä¿ç•™å­—ï¼ˆæ¯”å¦‚protectedã€staticå’Œinterfaceï¼‰</li></ul><p>å…¶ä¸­ï¼Œå°¤å…¶éœ€è¦æ³¨æ„thisçš„é™åˆ¶ã€‚ES6 æ¨¡å—ä¹‹ä¸­ï¼Œé¡¶å±‚çš„<code>this</code>æŒ‡å‘<code>undefined</code>ï¼Œå³ä¸åº”è¯¥åœ¨é¡¶å±‚ä»£ç ä½¿ç”¨thisã€‚</p><p>ğŸ‘‡å› æ­¤åˆ©ç”¨é¡¶å±‚çš„ <code>this</code> ç­‰äº <code>undefined</code> è¿™ä¸ªè¯­æ³•ç‚¹ï¼Œå¯ä»¥ä¾¦æµ‹å½“å‰ä»£ç æ˜¯å¦åœ¨ <code>ES6</code> æ¨¡å—ä¹‹ä¸­ã€‚</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> isNotModuleScript </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">undefined;</span></span>
<span class="line"></span></code></pre></div><h2 id="ç¼–è¯‘æ—¶ã€è¿è¡Œæ—¶ã€é™æ€åŒ–" tabindex="-1">ç¼–è¯‘æ—¶ã€è¿è¡Œæ—¶ã€é™æ€åŒ– <a class="header-anchor" href="#ç¼–è¯‘æ—¶ã€è¿è¡Œæ—¶ã€é™æ€åŒ–" aria-hidden="true">#</a></h2><ul><li>ESMå‘ç”Ÿåœ¨ç¼–è¯‘æ—¶ä¸”æ˜¯é™æ€åŒ–çš„</li><li>CJSå‘ç”Ÿåœ¨è¿è¡Œæ—¶</li></ul><p>ç¼–è¯‘æ—¶æŠ¥é”™æ˜¯è¯­æ³•/å¥æ³•é”™è¯¯ è¿è¡Œæ—¶æŠ¥é”™æ˜¯å„ç§æƒ…å†µ ğŸ‘†å¹³æ—¶å¯ä»¥ç•™æ„ä¸€ä¸‹ä¸¤ç§æŠ¥é”™çš„åŒºåˆ«</p><blockquote><p>ES6 æ¨¡å—çš„è®¾è®¡æ€æƒ³ï¼Œæ˜¯å°½é‡çš„é™æ€åŒ–ï¼Œä½¿å¾—ç¼–è¯‘æ—¶å°±èƒ½ç¡®å®šæ¨¡å—çš„ä¾èµ–å…³ç³»ï¼Œä»¥åŠæŠ›å‡ºå’Œæ¥æ”¶çš„å˜é‡</p></blockquote><h3 id="esmçš„ç¼–è¯‘æ—¶" tabindex="-1">ESMçš„ç¼–è¯‘æ—¶ <a class="header-anchor" href="#esmçš„ç¼–è¯‘æ—¶" aria-hidden="true">#</a></h3><p>ç¼–è¯‘æ—¶ï¼šå¦‚ <code>import</code> å‘½ä»¤æ˜¯ç¼–è¯‘é˜¶æ®µæ‰§è¡Œçš„ï¼Œå³åœ¨ä»£ç è¿è¡Œä¹‹å‰ã€‚ ç¼–è¯‘è¿‡ç¨‹ä¸èƒ½ä½¿ç”¨è¡¨è¾¾å¼å’Œå˜é‡ï¼Œè¡¨è¾¾å¼å’Œå˜é‡æ˜¯åªæœ‰åœ¨è¿è¡Œæ—¶æ‰èƒ½å¾—åˆ°çš„åŠ¨æ€ç»“æœ</p><p><strong>å› ä¸ºESMæ˜¯å‘½ä»¤å¼è¯­æ³•ï¼Œå› æ­¤ä¸åšæºç è§£è¯»å’Œä¼ªä»£ç çš„ç¼–å†™ï¼Œè¯·å½»åº•ç†è§£ğŸ‘‡å‘ç”Ÿåœ¨ç¼–è¯‘æ—¶çš„æ¨¡å—åŒ–åŸç†</strong></p><p>ç¼–è¯‘æµç¨‹æ˜¯ï¼š</p><blockquote><p>JS å¼•æ“å¯¹è„šæœ¬é™æ€åˆ†æçš„æ—¶å€™ï¼Œé‡åˆ°å‘½ä»¤ <code>import</code> ï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ªåªè¯»å¼•ç”¨ã€‚ç­‰åˆ°è„šæœ¬çœŸæ­£æ‰§è¡Œæ—¶ï¼Œå†æ ¹æ®è¿™ä¸ªåªè¯»å¼•ç”¨ï¼Œåˆ°è¢«åŠ è½½çš„æ–‡ä»¶é‡Œé¢å»å–å€¼ï¼ˆç”±äº <code>ES6 import</code>çš„å˜é‡ï¼Œåªæ˜¯ä¸€ä¸ª<code>â€œç¬¦å·è¿æ¥(æŒ‡é’ˆ)â€</code>ï¼Œæ‰€ä»¥è¿™ä¸ªå˜é‡æ˜¯åªè¯»çš„ï¼Œç›¸å½“äºâ€œæŠ›å‡ºâ€çš„å˜é‡éƒ½æ˜¯constï¼Œå¯¹å®ƒè¿›è¡Œé‡æ–°èµ‹å€¼ä¼šæŠ¥é”™ã€‚</p></blockquote><blockquote><p>æµè§ˆå™¨é€šè¿‡htmlçš„<code>&lt;script type=&quot;module&quot;&gt;</code>,åŠ è½½ç¬¬ä¸€ä¸ªjsï¼Œè¿™ä¸ªjsæ˜¯å…¥å£æ–‡ä»¶ åç»­æ¨¡å—éƒ½æ˜¯jsä¸­çš„importï¼Œè€Œä¸æ˜¯æµè§ˆå™¨ä¸­çš„<code>&lt;script&gt;</code></p></blockquote><blockquote><p>æµè§ˆå™¨åŠ è½½æ–‡ä»¶çš„åŠŸèƒ½æˆ‘ä»¬ç§°ä¸ºåŠ è½½å™¨ï¼ŒåŠ è½½å™¨å¼€å§‹åŠ è½½æ–‡ä»¶æ—¶ï¼Œä¼šæŠŠæ–‡ä»¶è·¯å¾„ä½œä¸ºkeyè®°å½•åˆ°æ¨¡å—æ˜ å°„(ç¼“å­˜)ä¸­ ä¸ç­‰æ–‡ä»¶åŠ è½½å®Œæˆï¼Œæ ‡è®°ä¸ºåŠ è½½ä¸­ã€‚ç»§ç»­å¼€å§‹ä¸‹ä¸€ä¸ªæ–‡ä»¶ã€‚ åŠ è½½å®Œæˆåè§¦å‘è§£ææ–‡ä»¶å³<code>ç¼–è¯‘</code>ï¼Œè¯†åˆ«é™æ€è¯­æ³•ä¸­importã€‚ç»§ç»­è§¦å‘åŠ è½½å™¨ï¼Œä»¥æ­¤å½¢æˆäº†ä¸€ç§æ·±åº¦éå†çš„æ•ˆæœï¼Œä¸è¿‡æ˜¯ä¸ç­‰å¾…çš„é‚£ç§ æœ‰äº†æ¨¡å—æ˜ å°„(ç¼“å­˜)ï¼ŒåŠ è½½å™¨å°±å¯ä»¥è·³è¿‡åŠ è½½é‡å¤æ¨¡å—ï¼Œç›´æ¥å¯¼å‡ºæ¨¡å—çš„è¿è¡Œç»“æœ å¦å¤–ï¼Œå¯¼å‡ºå€¼çš„å¼•ç”¨æ˜¯åœ¨é€’å½’åŠ è½½æ–‡ä»¶ä¹‹åæ‰§è¡Œçš„ï¼Œå³ä¼šåˆ°æœ€æ·±å±‚å†å¾€ä¸ŠæŠ›å‡ºçš„é¡ºåºå¯¼å‡ºå€¼çš„å¼•ç”¨</p></blockquote><p>ES6 æ¨¡å—â€œæŠ›å‡ºâ€çš„å˜é‡æ˜¯æ´»çš„ï¼ŒES6 æ¨¡å—æ˜¯åŠ¨æ€å–å€¼ï¼Œå¹¶ä¸æ˜¯é€šè¿‡å­˜å‚¨å€¼æ¥åšæŠ›å‡º</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">fs</span><span style="color:#89DDFF;">&#39;\`</span></span>
<span class="line"></span></code></pre></div><p>ğŸ‘†ä¸æ˜¯å‡½æ•°ï¼Œæ˜¯jsè¯­æ³•æ”¯æŒçš„è¯»å–å‘½ä»¤ï¼Œä¸”å‘½ä»¤å®ç°åªè¯»å–fsæ–‡ä»¶ä¸­æŠ›å‡ºçš„aå’Œbï¼Œå¹¶ä¸”è¿™é‡Œçš„<code>{ }</code>å¹¶ä¸æ˜¯è§£æ„èµ‹å€¼ï¼Œè€Œæ˜¯å‘½ä»¤è§£æçš„å­—ç¬¦ä¸²ã€‚</p><p>å¦å¤–<code>import</code> ä¸èƒ½å†™åœ¨æ¡ä»¶ä»£ç å—ä¹‹ä¸­ï¼Œæ²¡æ³•åšé™æ€ä¼˜åŒ–äº†ï¼Œè¿èƒŒäº† ES6 æ¨¡å—çš„è®¾è®¡åˆè¡·</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// æŠ¥é”™</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> (x </span><span style="color:#89DDFF;">===</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">MyModual</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./myModual</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>ç¼–è¯‘è¿‡ç¨‹å¤„ç† import è¯­å¥ï¼Œè¿™æ—¶ä¸ä¼šå»åˆ†ææˆ–æ‰§è¡Œ if è¯­å¥ï¼Œæ‰€ä»¥ import è¯­å¥æ”¾åœ¨ if ä»£ç å—ä¹‹ä¸­æ¯«æ— æ„ä¹‰ï¼ŒæŠ¥å¥æ³•é”™è¯¯ï¼Œè€Œä¸æ˜¯æ‰§è¡Œæ—¶é”™è¯¯</p><h3 id="cjsçš„è¿è¡Œæ—¶" tabindex="-1">CJSçš„è¿è¡Œæ—¶ <a class="header-anchor" href="#cjsçš„è¿è¡Œæ—¶" aria-hidden="true">#</a></h3><p><code>CommonJS</code> å’Œ <code>AMD</code> æ¨¡å—åŒ–ï¼Œéƒ½åªèƒ½åœ¨è¿è¡Œæ—¶ç¡®å®šæ¨¡å—çš„ä¾èµ–å…³ç³»ï¼Œä»¥åŠæŠ›å‡ºå’Œæ¥æ”¶çš„å˜é‡ å¦‚Commonjs</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">fs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"></span></code></pre></div><p>ä¸Šé¢è®²åŸç†çš„æ—¶å€™ä¹Ÿè®²åˆ°ï¼Œ<code>rqeuire</code>æ˜¯ä¸ªå‡½æ•°ï¼Œæ˜¯è¿è¡Œå‡½æ•°æ‰èƒ½è¯»å–èµ„æºçš„ï¼Œå¹¶ä¸”åªèƒ½æ•´ä¸ªæ–‡ä»¶çš„å­˜å‚¨éƒ½è¯»å–ä¸‹æ¥ï¼Œå†è§£æ„èµ‹å€¼ç»™aå’Œb</p><h3 id="nodejsä¸­å…±ç”¨ä¸¤ç§æ¨¡å—åŒ–æ–¹å¼ä¼šæ€æ ·" tabindex="-1">nodejsä¸­å…±ç”¨ä¸¤ç§æ¨¡å—åŒ–æ–¹å¼ä¼šæ€æ · <a class="header-anchor" href="#nodejsä¸­å…±ç”¨ä¸¤ç§æ¨¡å—åŒ–æ–¹å¼ä¼šæ€æ ·" aria-hidden="true">#</a></h3><p>é€šè¿‡ Babel è½¬ç ï¼ŒCommonJS æ¨¡å—çš„ require å‘½ä»¤å’Œ ES6 æ¨¡å—çš„ import å‘½ä»¤ï¼Œå¯ä»¥å†™åœ¨åŒä¸€ä¸ªæ–‡ä»¶é‡Œé¢ï¼Œä½†æ˜¯æœ€å¥½ä¸è¦è¿™æ ·åšã€‚å› ä¸ºimport åœ¨é™æ€è§£æé˜¶æ®µæ‰§è¡Œï¼Œæ‰€ä»¥å®ƒæ˜¯ä¸€ä¸ªæ¨¡å—ä¹‹ä¸­æœ€æ—©æ‰§è¡Œçš„ï¼Œå‡ºç°ä¸æŒ‰ä»£ç é¡ºåºæ‰§è¡Œçš„æƒ…å†µï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">core-js/modules/es6.symbol</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">core-js/modules/es6.promise</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> React </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">React</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p><code>core-js/modules</code>æ˜¯ç»™reactå®ä¾‹åŒ–ç”¨çš„æ’ä»¶ï¼Œéœ€è¦åœ¨reactä¹‹å‰åŠ è½½å¥½ï¼Œä½†æ˜¯è¿™æ ·å†™ä¼šå…ˆå®ä¾‹åŒ–react</p><h2 id="esmå¯ä»¥è¿è¡Œæ—¶çš„import" tabindex="-1">ESMå¯ä»¥è¿è¡Œæ—¶çš„import() <a class="header-anchor" href="#esmå¯ä»¥è¿è¡Œæ—¶çš„import" aria-hidden="true">#</a></h2><p><code>import()</code> å‡½æ•°å¯ä»¥ç”¨åœ¨ä»»ä½•åœ°æ–¹ã€‚å®ƒæ˜¯è¿è¡Œæ—¶æ‰§è¡Œï¼Œä»€ä¹ˆæ—¶å€™è¿è¡Œåˆ°è¿™ä¸€å¥ï¼Œä¹Ÿä¼šåŠ è½½æŒ‡å®šçš„æ¨¡å—ã€‚å¦å¤–ï¼Œ<code>import()</code> å‡½æ•°ä¸æ‰€åŠ è½½çš„æ¨¡å—æ²¡æœ‰é™æ€è¿æ¥å…³ç³»ï¼ˆäººè¯å°±æ˜¯import()ä¸ä¼šè¿”å›æŒ‡å®šå˜é‡ï¼Œè€Œæ˜¯è¿”å›æ•´ä¸ªæ–‡ä»¶çš„è¾“å‡ºï¼‰ï¼Œè¿™ç‚¹ä¹Ÿæ˜¯ä¸ <code>import</code> è¯­å¥ä¸ç›¸åŒã€‚</p><p><code>import()</code> ç±»ä¼¼äº <code>nodejs</code> çš„ <code>require</code> æ–¹æ³•ï¼ŒåŒºåˆ«ä¸»è¦æ˜¯å‰è€…æ˜¯å¼‚æ­¥åŠ è½½ï¼Œåè€…æ˜¯åŒæ­¥åŠ è½½ï¼ˆå°±æ˜¯requireä¸€å®šä¼šåŠ è½½ç»“æŸæ‰å¾€ä¸‹èµ°ï¼Œè€Œimport()ä¸awaitä½çš„è¯ä¼šå¼‚æ­¥æ‰§è¡Œï¼‰</p><blockquote><p>æ‰€ä»¥nodejsç¯å¢ƒ <code>Commonjs</code>å¯ä»¥è¢«<code>await import()</code>å®Œå…¨æ›¿ä»£äº†ï¼Ÿ</p></blockquote><h2 id="es6ä¸commonjsçš„åŒºåˆ«" tabindex="-1">ES6ä¸CommonJSçš„åŒºåˆ« <a class="header-anchor" href="#es6ä¸commonjsçš„åŒºåˆ«" aria-hidden="true">#</a></h2><ul><li>CommonJS æ¨¡å—è¾“å‡ºçš„æ˜¯ä¸€ä¸ªå€¼çš„æ‹·è´(æ·±æ‹·è´)</li><li>ES6 æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„å¼•ç”¨ï¼ˆå˜é‡çš„æŒ‡é’ˆï¼‰</li><li></li><li>CommonJS æ¨¡å—æ˜¯è¿è¡Œæ—¶åŠ è½½</li><li>ES6 æ¨¡å—æ˜¯ç¼–è¯‘æ—¶è¾“å‡ºæ¥å£</li></ul><p><strong>ESMå¯¹å·¥ç¨‹åŒ–æœ€å¤§çš„å¥½å¤„æ˜¯æµè§ˆå™¨ç›´æ¥æ”¯æŒæ¨¡å—åŒ–ä»£ç çš„ç¼–å†™</strong> å¦‚ä¸‹ä¾é ESMä¸å®‰è£…ä»»ä½•ä¾èµ–ç›´æ¥ä½¿ç”¨reactæ¡†æ¶ï¼Œ</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  import </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> html</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> Component</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> render </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> from &#39;https://unpkg.com/htm/preact/standalone.module.js&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">  class App extends Component </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    state </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">count</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">setState</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> count</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">count</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">render</span><span style="color:#A6ACCD;">() </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      return html</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#F07178;">        &lt;div class=&quot;app&quot;&gt;</span></span>
<span class="line"><span style="color:#F07178;">          &lt;div&gt;count: </span><span style="color:#89DDFF;">\${</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">count</span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">&lt;/div&gt;</span></span>
<span class="line"><span style="color:#F07178;">          &lt;button onClick=</span><span style="color:#89DDFF;">\${</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">add</span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">&gt;Add Todo&lt;/button&gt;</span></span>
<span class="line"><span style="color:#F07178;">        &lt;/div&gt;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">\`</span><span style="color:#F07178;">;</span></span>
<span class="line"><span style="color:#F07178;">    }</span></span>
<span class="line"><span style="color:#F07178;">  }</span></span>
<span class="line"><span style="color:#F07178;">  render(</span><span style="color:#82AAFF;">html</span><span style="color:#89DDFF;">\`</span><span style="color:#F07178;">&lt;</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">App</span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> page=&quot;All&quot; /&gt;</span><span style="color:#89DDFF;">\`</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> document.body);</span></span>
<span class="line"><span style="color:#A6ACCD;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre></div><h2 id="esmçš„é™åˆ¶ä¸è§£å†³æ–¹æ¡ˆ" tabindex="-1">esmçš„é™åˆ¶ä¸è§£å†³æ–¹æ¡ˆ <a class="header-anchor" href="#esmçš„é™åˆ¶ä¸è§£å†³æ–¹æ¡ˆ" aria-hidden="true">#</a></h2><h3 id="ä»£ç éœ€è¦åŸºäºeså¼€å‘" tabindex="-1">ä»£ç éœ€è¦åŸºäºeså¼€å‘ <a class="header-anchor" href="#ä»£ç éœ€è¦åŸºäºeså¼€å‘" aria-hidden="true">#</a></h3><h3 id="ç¬¬ä¸‰æ–¹èµ„æºçš„å¯¼å‡ºè¦æ”¯æŒesm" tabindex="-1">ç¬¬ä¸‰æ–¹èµ„æºçš„å¯¼å‡ºè¦æ”¯æŒESM <a class="header-anchor" href="#ç¬¬ä¸‰æ–¹èµ„æºçš„å¯¼å‡ºè¦æ”¯æŒesm" aria-hidden="true">#</a></h3><p>ç¬¬ä¸‰æ–¹èµ„æºnode_moduleæˆ–è€…CDNçš„æ¨¡å—è¦å¯ä»¥é€šè¿‡importåŠ è½½åˆ°</p><h3 id="ä¸æ”¯æŒesmçš„æµè§ˆå™¨" tabindex="-1">ä¸æ”¯æŒesmçš„æµè§ˆå™¨ <a class="header-anchor" href="#ä¸æ”¯æŒesmçš„æµè§ˆå™¨" aria-hidden="true">#</a></h3><p>ä¸æ”¯æŒesmçš„æµè§ˆå™¨ä¼šè·³è¿‡<code>type=module</code>çš„js è¿™æ—¶å†htmlå†™å¤šä¸€ä¸ª<code>bundle.js</code> <code>commonjsè§„èŒƒ</code>çš„ä»£ç èµ„æºå…¼å®¹å³å¯ æµè§ˆå™¨æä¾›ä¸€ä¸ªæ ‡ç­¾å±æ€§<code>&lt;script nomodule src=&quot;&quot;&gt;</code>ä¼šåˆ¤æ–­æ˜¯å¦æ”¯æŒesmï¼Œä¸æ”¯æŒåˆ™åŠ è½½è¯¥æ ‡ç­¾</p><p><a href="https://github.com/systemjs/systemjs" target="_blank" rel="noreferrer">systemjs</a>å®ç°å…¼å®¹æ–¹æ¡ˆ</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">system.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">systemjs-importmap</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  &quot;imports&quot;: {</span></span>
<span class="line"><span style="color:#A6ACCD;">    &quot;lodash&quot;: &quot;https://unpkg.com/lodash@4.17.10/lodash.js&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">systemjs-module</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>åŠ è½½è¿™ä¸ªåº“åï¼Œç”¨type=&quot;systemjs-module&quot;ï¼Œä¼šæ ¹æ®æµè§ˆå™¨æ”¯æŒesmçš„æƒ…å†µå¤„ç†ä»£ç </p><h2 id="æ€è€ƒ" tabindex="-1">æ€è€ƒ <a class="header-anchor" href="#æ€è€ƒ" aria-hidden="true">#</a></h2><h3 id="_1-webpackå·¥ç¨‹ä¸‹æ€ä¹ˆåŒæ—¶æ”¯æŒcommonjså’Œesmè§„èŒƒ" tabindex="-1">1. webpackå·¥ç¨‹ä¸‹æ€ä¹ˆåŒæ—¶æ”¯æŒCommonJså’ŒESMè§„èŒƒ <a class="header-anchor" href="#_1-webpackå·¥ç¨‹ä¸‹æ€ä¹ˆåŒæ—¶æ”¯æŒcommonjså’Œesmè§„èŒƒ" aria-hidden="true">#</a></h3><p>æç¤ºï¼šwebpacké€šè¿‡ç¼–è¯‘(ä¸ç­‰äºä¸Šé¢è¯´çš„jså¼•æ“çš„ç¼–è¯‘)CMDå’ŒESMçš„æºä»£ç åšèµ„æºæ”¶é›†åˆå¹¶ï¼Œå†åˆ©ç”¨jsæ’å…¥scriptçš„å½¢å¼æ¥åšæ•´åˆè¿‡çš„æ¨¡å—åŒ–</p><p>å¼€å‘ç¼–å†™çš„æ˜¯Commonjså’ŒESMï¼Œæœ€åä¸Šçº¿çš„ä»£ç æ—¢ä¸æ˜¯CMDä¹Ÿä¸æ˜¯ESMï¼Œè€Œæ˜¯æ‰“åŒ…åçš„æ’å…¥scriptæ–¹æ³•(webpackå¹²çš„)</p><h3 id="_2-babelå¦‚ä½•æŠŠesmç¼–è¯‘æˆcommonjs-åœ¨nodeç¯å¢ƒä¸­è¿è¡Œ" tabindex="-1">2. babelå¦‚ä½•æŠŠesmç¼–è¯‘æˆcommonjsï¼Œåœ¨nodeç¯å¢ƒä¸­è¿è¡Œ <a class="header-anchor" href="#_2-babelå¦‚ä½•æŠŠesmç¼–è¯‘æˆcommonjs-åœ¨nodeç¯å¢ƒä¸­è¿è¡Œ" aria-hidden="true">#</a></h3><p><a href="https://www.imyangyong.com/blog/2020/11/javascript/Babel%20%E4%B9%8B%20ESM%20%E5%92%8C%20CommonJS/" target="_blank" rel="noreferrer">Babel ä¹‹ ESM å’Œ CommonJS</a></p><h3 id="_3-webpackã€rollupæ˜¯æ€ä¹ˆæ”¯æŒtree-shaking" tabindex="-1">3. webpackã€rollupæ˜¯æ€ä¹ˆæ”¯æŒtree shaking <a class="header-anchor" href="#_3-webpackã€rollupæ˜¯æ€ä¹ˆæ”¯æŒtree-shaking" aria-hidden="true">#</a></h3><p>æç¤ºï¼šESMå› ä¸ºå‘½ä»¤å¼è¯­æ³•å‘ç”Ÿåœ¨ç¼–è¯‘æ—¶æ ¹æ®æŒ‡é’ˆæ¥æ”¶å˜é‡ï¼Œå³æœ¬èº«å°±æ˜¯ä¸å¼•å…¥é¢å¤–çš„å˜é‡ï¼Œä¹Ÿå°±æ˜¯ä¸éœ€è¦åš<code>tree shaking</code>è¿™ä¸ªåŠ¨ä½œï¼Œä½†æ˜¯æ‰“åŒ…å·¥å…·æœ€ç»ˆä¸Šçº¿çš„ä¸æ˜¯ESMï¼Œä¸”å³ä½¿ä»£ç å†™çš„CJSï¼Œä¸Šçº¿åä¹Ÿèƒ½å®ç°<code>tree shaking</code></p><hr><h2 id="å‚è€ƒèµ„æ–™" tabindex="-1">å‚è€ƒèµ„æ–™ <a class="header-anchor" href="#å‚è€ƒèµ„æ–™" aria-hidden="true">#</a></h2><ul><li><a href="https://jakearchibald.com/2017/es-modules-in-browsers/" target="_blank" rel="noreferrer">ECMAScript modules in browsers</a></li><li><a href="https://zhuanlan.zhihu.com/p/26567790" target="_blank" rel="noreferrer">JavaScript æ¨¡å—ç°çŠ¶</a></li><li><a href="https://github.com/developit/htm" target="_blank" rel="noreferrer">åŸºäºesmã€htmlã€unpkgçš„å‰ç«¯å¼€å‘æ¨¡å¼</a></li><li><a href="https://timdaub.github.io/2021/01/16/web-principles/" target="_blank" rel="noreferrer">How I Build JavaScript Apps In 2021</a></li><li><a href="https://estimator.dev/" target="_blank" rel="noreferrer">Find out how much turning on modern JS could save.</a></li><li><a href="https://zhuanlan.zhihu.com/p/96718777" target="_blank" rel="noreferrer">ä»€ä¹ˆæ˜¯amdã€commonjsã€umdã€esm?</a></li><li><a href="https://hacks.mozilla.org/2018/03/es-modules-a-cartoon-deep-dive/" target="_blank" rel="noreferrer">ES modules: A cartoon deep-dive</a></li><li><a href="https://github.com/WICG/import-maps" target="_blank" rel="noreferrer">import.map</a></li><li><a href="https://topic.atatech.org/articles/202736" target="_blank" rel="noreferrer">é¢å¯¹ ESM çš„å¼€å‘æ¨¡å¼ï¼Œwebpack è¿˜æœ‰è¿˜æ‰‹ä¹‹åŠ›å—?</a></li></ul>`,98),y=[e,t,c,r];function F(D,i,C,A,d,u){return l(),o("div",null,y)}const f=a(p,[["render",F]]);export{m as __pageData,f as default};
