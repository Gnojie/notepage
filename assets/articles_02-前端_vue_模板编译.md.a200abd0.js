import{_ as s,o as a,c as n,d as l}from"./app.1b6c8785.js";const A=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[{"level":2,"title":"è§£æå™¨","slug":"è§£æå™¨","link":"#è§£æå™¨","children":[]},{"level":2,"title":"ä¼˜åŒ–å™¨","slug":"ä¼˜åŒ–å™¨","link":"#ä¼˜åŒ–å™¨","children":[]},{"level":2,"title":"ä»£ç ç”Ÿæˆå™¨","slug":"ä»£ç ç”Ÿæˆå™¨","link":"#ä»£ç ç”Ÿæˆå™¨","children":[]},{"level":2,"title":"æ‰“åŒ…å·¥å…·çš„ç¼–è¯‘","slug":"æ‰“åŒ…å·¥å…·çš„ç¼–è¯‘","link":"#æ‰“åŒ…å·¥å…·çš„ç¼–è¯‘","children":[]}],"relativePath":"articles/02-å‰ç«¯/vue/æ¨¡æ¿ç¼–è¯‘.md"}'),o={name:"articles/02-å‰ç«¯/vue/æ¨¡æ¿ç¼–è¯‘.md"},p=l(`<p>åœ¨ <a href="./é‡å­¦vue-01æ¨¡æ¿è¯­æ³•.html">é‡å­¦vue-01æ¨¡æ¿è¯­æ³•</a> ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“äº†Vueå¯¹å¤–çš„ç‰ˆæœ¬åˆ†ä¸ºå®Œæ•´ç‰ˆå’Œruntimeç‰ˆï¼Œå®Œæ•´ç‰ˆæ¯”runtimeç‰ˆå¤šäº†æ¨¡æ¿ç¼–è¯‘å™¨</p><blockquote><p>ç”¨æ‰“åŒ…å·¥å…·æ—¶ï¼Œæœ€ç»ˆæ‰“å¥½çš„åŒ…é‡Œå®é™…ä¸Šæ˜¯ä¸éœ€è¦ç¼–è¯‘å™¨çš„ï¼Œæ‰€ä»¥åªç”¨è¿è¡Œæ—¶ç‰ˆæœ¬å³å¯.</p><p>å› ä¸ºè¿è¡Œæ—¶ç‰ˆæœ¬ç›¸æ¯”å®Œæ•´ç‰ˆä½“ç§¯è¦å°å¤§çº¦ 30%ï¼Œæ‰€ä»¥åº”è¯¥å°½å¯èƒ½ä½¿ç”¨è¿™ä¸ªç‰ˆæœ¬,æ‰“åŒ…å·¥å…·å¼•å…¥çš„èµ„æºé»˜è®¤æ˜¯è¿è¡Œæ—¶ç‰ˆæœ¬çš„</p></blockquote><p>è¿™å¤§å‡ºæ¥30%çš„ç¼–è¯‘å™¨ï¼Œèƒ½è®©æˆ‘ä»¬å†™<code>templateå­—ç¬¦ä¸²</code>,åœ¨æµè§ˆå™¨è¿è¡Œæ—¶è§£ææˆ <code>renderå‡½æ•°</code> å†æ‰§è¡Œç”Ÿæˆ <code>VNode</code>ï¼Œæ¸²æŸ“ç”Ÿæˆ <code>çœŸå®DOM</code></p><p>æˆ‘ä»¬å°è¯•å®ç°è¿™éƒ¨åˆ†çš„ç¼–è¯‘å™¨(<code>templateå­—ç¬¦ä¸²</code> -&gt; <code>renderå‡½æ•°ä½“</code>) åˆ†æé˜¶æ®µ</p><ul><li>è§£æå™¨</li><li>ä¼˜åŒ–å™¨</li><li>ä»£ç ç”Ÿæˆå™¨</li></ul><h2 id="è§£æå™¨" tabindex="-1">è§£æå™¨ <a class="header-anchor" href="#è§£æå™¨" aria-hidden="true">#</a></h2><blockquote><p>æŠŠæ¨¡æ¿å­—ç¬¦ä¸²è§£æå±‚ASTå¯¹è±¡</p></blockquote><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">compiler</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">template</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">init</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">template</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">parseHTML</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">template</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;font-style:italic;">hookObj</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">template</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">init</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">template</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">parseHTML</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">template</span><span style="color:#89DDFF;">,{</span></span>
<span class="line"><span style="color:#F07178;">      startHook</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">startHook</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">},</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// æ ‡ç­¾å¼€å§‹æ—¶è§¦å‘é’©å­</span></span>
<span class="line"><span style="color:#F07178;">      endHook</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{},</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// æ ‡ç­¾ç»“æŸæ—¶è§¦å‘é’©å­</span></span>
<span class="line"><span style="color:#F07178;">      stringHook</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{},</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// å­—ç¬¦ä¸²æ—¶è§¦å‘é’©å­</span></span>
<span class="line"><span style="color:#F07178;">      commentHook</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{},</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// æ³¨é‡Šæ—¶è§¦å‘é’©å­</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">compiler</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">&lt;div&gt;1&lt;/div&gt;</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p>è§£æå™¨çš„å†…éƒ¨åŸç†æ˜¯ä¸€å°æ®µä¸€å°æ®µåœ°æˆªå–æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œæ¯æˆªå–ä¸€å°æ®µå­—ç¬¦ä¸²ï¼Œå°±ä¼šæ ¹æ®æˆªå–å‡ºæ¥çš„å­—ç¬¦ä¸²ç±»å‹è§¦å‘ä¸åŒçš„é’©å­å‡½æ•°ï¼Œç›´åˆ°æ¨¡æ¿å­—ç¬¦ä¸²æˆªç©ºåœæ­¢è¿è¡Œ</p><h2 id="ä¼˜åŒ–å™¨" tabindex="-1">ä¼˜åŒ–å™¨ <a class="header-anchor" href="#ä¼˜åŒ–å™¨" aria-hidden="true">#</a></h2><blockquote><p>éå†ASTæ ‡è®°é™æ€èŠ‚ç‚¹</p></blockquote><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#82AAFF;">optimize</span><span style="color:#A6ACCD;"> (AST) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">AST</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;font-style:italic;">return</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ç¬¬ä¸€æ­¥ï¼šæ ‡è®°æ‰€æœ‰é™æ€èŠ‚ç‚¹</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">markStatic</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">AST</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ç¬¬äºŒæ­¥ï¼šæ ‡è®°æ‰€æœ‰é™æ€æ ¹èŠ‚ç‚¹</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">markStaticRoots</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">AST</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="ä»£ç ç”Ÿæˆå™¨" tabindex="-1">ä»£ç ç”Ÿæˆå™¨ <a class="header-anchor" href="#ä»£ç ç”Ÿæˆå™¨" aria-hidden="true">#</a></h2><blockquote><p>éå†AST ç”Ÿæˆå¹¶æ‹¼æ¥å­—ç¬¦ä¸²ï¼Œ<code>new Function</code>åˆ›å»ºå‡ºrenderå‡½æ•°</p></blockquote><h2 id="æ‰“åŒ…å·¥å…·çš„ç¼–è¯‘" tabindex="-1">æ‰“åŒ…å·¥å…·çš„ç¼–è¯‘ <a class="header-anchor" href="#æ‰“åŒ…å·¥å…·çš„ç¼–è¯‘" aria-hidden="true">#</a></h2><blockquote><p>é™¤äº†ğŸ‘†å®Œæ•´ç‰ˆvueé‡Œæœ‰æ¨¡ç‰ˆè¯­æ³•çš„ç¼–è¯‘å™¨,ä¾é æ‰“åŒ…å·¥å…·æ¥ç¼–è¯‘çš„æ¨¡æ¿è¯­æ³•çš„ç¼–è¯‘å™¨ï¼Œæˆ‘ä»¬ä¹Ÿæ¥çœ‹çœ‹</p></blockquote><p>åŒæ ·çš„<code>vue-loader</code>ï¼Œè§£æå‡º<code>.vue</code>æ–‡ä»¶ä¸­çš„<code>template</code>éƒ¨åˆ†å‡ºæ¥åï¼Œä¼šè¿›è¡Œè½¬è¯‘æˆASTï¼Œæ‰“æ ‡è®°ï¼Œç”Ÿæˆrenderå­—ç¬¦ä¸²ç­‰æ­¥éª¤</p><p>æ€è€ƒğŸ¤”: templateé…ç½®çš„é‚£ç§å†™æ³•ä¹Ÿæ˜¯vue-loaderåšçš„ç¼–è¯‘å—</p>`,18),e=[p];function t(c,r,F,y,i,D){return a(),n("div",null,e)}const C=s(o,[["render",t]]);export{A as __pageData,C as default};
